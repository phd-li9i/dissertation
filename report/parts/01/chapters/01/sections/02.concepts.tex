%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Εκτιμητέο διάνυσμα κατάστασης}
\label{subsec:01_01_02_1}

Κεντρικής σημασίας στη διατριβή είναι το εκτιμητέο διάνυσμα κατάστασης ενός
επίγειου οχήματος. Μέχρι σε αυτό το σημείο χρησιμοποιείτο αντί αυτής η λέξη
``θέση" για εισαγωγικούς λόγους.

\begin{bw_box}
\begin{definition}
  \textit{Διάνυσμα κατάστασης ή στάση}

Ως διάνυσμα κατάστασης θεωρούμε τη στάση ενός οχήματος στο δισδιάστατο επίπεδο:
τον ειρμό της θέσης του με τον προσανατολισμό του, ως προς το σύστημα αναφοράς
του χάρτη του περιβάλλοντος στο οποίο βρίσκεται το όχημα (σχήμα
\ref{fig:pose_figure}):
  \begin{align}
    \bm{p} = [x \ y \ \theta]^\top
\end{align}

\end{definition}
\end{bw_box}

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/pose.eps_tex}
  \caption{\small Το διάνυσμα κατάστασης (στάση) $\bm{p} = [x,y,\theta]^\top$
    ενός επίγειου οχήματος στο οριζόντιο επίπεδο}
  \label{fig:pose_figure}
\end{figure}

Η ακριβής γνώση της στάσης του οχήματος είναι απαγορευμένη (παρατήρηση
\ref{remark:observable}): η \textit{εκτίμηση} $\hat{\bm{p}}$ της στάσης του
είναι το αντικείμενο των αλγορίμων εύρεσης στάσης.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Τα δύο κύρια προβλήματα εκτίμησης στάσης}
\label{subsec:01_01_02_2}

Τα δύο κύρια προβλήματα εκτίμησης της στάσης ενός οχήματος (σχήμα
\ref{fig:localisation_problems_pie}) διακρίνονται βάσει του εύρους της
αβεβαιότητας που διαθέτει το όχημα για αυτή.  Και τα δύο προϋποθέτουν
κατ' ελάχιστον τη γνώση του χάρτη του περιβάλλοντος στο οποίο
βρίσκεται το όχημα (το μόνο σύστημα αναφοράς είναι αυτό του χάρτη και χωρίς
αυτό είναι αδόκιμη η εκτίμηση της στάσης του) και μετρήσεις από τουλάχιστον
έναν αισθητήρα αντίληψης του περιβάλλοντός του.

Το πρόβλημα της εύρεσης-εκτίμησης της στάσης του βάσει καθολικής αβεβαιότητος
(global localisation) αναφέρεται στη συνθήκη όπου η μόνη επιπρόσθετη γνώση που
διαθέτει το ρομπότ είναι ότι βρίσκεται εντός των ορίων του χάρτη: δεν υπάρχει
εκ των προτέρων γνώση για τη στάση του. Για τη λύση του προβλήματος το ρομπότ
πρέπει να συλλέξει μετρήσεις από τους αισθητηρες του και να τις αντιπαραβάλλει
με το χάρτη του περιβάλλοντός. Εάν η εκτίμηση της στάσης ισούται με την
πραγματική του στάση τότε εικονικές μετρήσεις ή χαρακτηριστικά του χάρτη που
αντιλαμβάνεται το ρομπότ από την εκτίμήσή της στάσης του προσεγγίζουν τις
αντίστοιχες πραγματικές μετρήσεις ή χαρακτηριστικά του περιβάλλοντος με
μεγαλύτερη πιστότητα από άλλες υποθέσεις για τη στάση του (σχήμα
\ref{fig:global_localisation}).

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/global_localisation.eps_tex}
  \caption{\small Το πρόβλημα της εκτίμησης της στάσης ενός ρομπότ βάσει καθολικής
           αβεβαιότητας της στάσης του. Το ρομπότ βρίσκεται στη θέση που
           σημειώνεται με πράσινο. Οι κουκίδες που σημειώνονται με πορτοκαλί
           δείχνουν υποθέσεις προς εξέταση για την εκτίμηση της στάσης του}
  \label{fig:global_localisation}
\end{figure}

Αντιθέτως το πρόβλημα της εκτίμησης της στάσης του βάσει περιορισμένης
αβεβαιότητας (pose tracking) δέχεται ως δεδομένη τη γνώση της αρχικής του
στάσης. Στόχος της λύσης του προβλήματος είναι η διαρκής εκτίμηση της στάσης
του καθώς το ρομπότ κινείται μέσα στο χώρο στο πέρασμα του χρόνου. Για την
επίλυσή του είναι εξαιρετικά επιτυχημένη η χρήση πιθανοτικών προσεγγίσεων, όπως
το φίλτρο Kalman \cite{Maybeck1979} και το φίλτρο σωματιδιών
\cite{Thrun2002a,Gustafsson2002}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Το φίλτρο σωματιδίων}
\label{subsec:01_01_02_3}

Οι πιθανοτικές προσεγγίσεις στο πρόβλημα της εκτίμησης της στάσης έχουν
αυξημένη ακρίβεια και ευρωστία σε σύγκριση με τις μη πιθανοτικές, αλλά, ανάλογα
με τη φύση τους, πάσχουν ή επιλύουν διάφορα προβλήματα που αφορούν στους σκοπούς
εκτίμησης. Για παράδειγμα τα φίλτρα Kalman είναι γνωστό ότι είναι εύρωστα
και ακριβή (βέλτιστα ακόμα όταν όλοι οι συστημικοί θόρυβοι είναι κατανεμημένοι
κανονικα), αλλά δεν έχουν την ικανότητα να αναπαραστούν αμφισημίες
(ambiguities) ως προς τη στάση ή να εντοπίζουν το ρομπότ στην περίπτωση
άγνωστης αρχικής στάσης. Από την άλλη πλευρά η φύση των τεχνικών MCL
\cite{Dellaert} τούς επιτρέπει να αναπαραστούν την αβεβαιότητα ως προς τη στάση
του ρομπότ διατηρώντας ένα σύνολο υποθέσεων (που ονομάζονται σωματίδια) για
αυτή, του οποίου η μορφή δεν δεσμεύεται από συναρτήσεις πυκνότητας πιθανότητας
μίας κορυφής (unimodal) όπως στα φίλτρα Kalman. Μεταξύ άλλων αυτή η
αναπαράσταση επιτρέπει στις προσεγγίσεις MCL να εντοπίζουν καθολικά ένα ρομπότ
και να παρακολουθούν τις αμφισημίες της στάσης του μέχρι να είναι σε θέση να τις
επιλύσει, λόγω της δυνατότητας αναπαράστασης αυθαίρετα πολύπλοκων πυκνοτήτων
πιθανότητας. Το σχήμα \ref{fig:pf_init} απεικονίζει την κατανομή υποθέσεων
στάσης μετά την αρχικοποίηση του φίλτρου σωματιδίων.

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/pf_init.eps_tex}
  \caption{\small Αρχικοποίηση κατανομής σωματιδίων δεδομένης εκτίμησης για την
           αρχική στάση. Η πληροφορία προσανατολισμού παραλείπεται για λόγους
           ευανάγνωσης. Στην αρχική φάση το φίλτρο δεν έχει συγκλίνει και
           συνεπώς η διακύμανσή του συνόλου υποθέσεων στάσης είναι μέγιστη}
  \label{fig:pf_init}
\end{figure}

Τα φίλτρα σωματιδίων εκτιμούν αναδρομικά την εκ των υστέρων πυκνότητα
πιθανότητας της στάσης ενός οχήματος βάσει λογικής Bayes
\cite{thrun2005probabilistic}:
\begin{align}
  \label{eq:pf_posterior}
  p(\bm{p}_t | \bm{z}_{1:t}, \bm{u}_{0,t-1}, \bm{M}) \propto & \nonumber \\
    p(\bm{z}_t | \bm{p}_t) &\int\limits_{\bm{p}^{\prime}} p(\bm{p}_t | \bm{p}^{\prime}, \bm{u}_{t-1}) \cdot p(\bm{p}^{\prime} | \bm{z}_{1:t-1}, \bm{u}_{0:t-2}, \bm{M}) dx^{\prime}
\end{align}
όπου η στάση του ρομπότ τη χρονική στιγμή $t$ συμβολίζεται με $\bm{p}_t$, η
ακολουθία των εντολών κίνησης που εκτελούνται από το το ρομπότ με
$\bm{u}_{0:t-1}$, και με $\bm{z}_{0:t}$ η ακολουθία των μετρήσεων που
γίνονται από το τους αισθητήρες του. $\bm{M}$ είναι ο χάρτης που αναπαραστά το
περιβάλλον στο οποίο κινείται το ρομπότ. Το μοντέλο κίνησης $p(\bm{p}_t |
\bm{p}_{t-1}, \bm{u}_{t-1})$ υποδηλώνει την πιθανότητα ότι τη χρονική στιγμή
χρονική στιγμή $t$ το ρομπότ καταλήγει στην κατάσταση $\bm{p}_t$ δεδομένου ότι
εκτελεί την εντολή κίνησης $\bm{u}_{t-1}$ ενώ βρίσκεται στην κατάσταση
$\bm{p}_{t-1}$ τη χρονική στιγμή $t-1$. Σε ρομπότ με τροχούς οι εντολές
κίνησης συνήθως αντικαθίστανται από μετρήσεις της περιστροφής τους μέσω
κωδικοποιητών (encoders), οι οποίες αναφέρονται ως \textit{οδομετρία}. Το
μοντέλο παρατήρησης $p(\bm{z}_t | \bm{p}_t, \bm{M})$ δηλώνει την πιθανότητα
μέτρησης $\bm{z}_t$ ενώ το ρομπότ βρίσκεται στη στάση $\bm{p}_t$.
Δεδομένου ότι τα φίλτρα σωματιδίων διατηρούν ένα σύνολο διαφορετικών υποθέσεων
ως προς την κατάσταση του ρομπότ, η κάθε μία σταθμίζεται σύμφωνα με την
πιθανότητα το ρομπότ να διενεργήσει τη μέτρηση $\bm{z}_t$ υπό τη συγκεκριμένη
υπόθεση στάσης ενός σωματιδίου $\bm{p}_t^i$ με βάση το μοντέλο παρατήρησης
$p(\bm{z}_t | \bm{p}_t, \bm{M})$, όπου $i$ δηλώνει τον δείκτη-αναγνωριστικό του
σωματιδίου-υπόθεσης $i$. Αυτή η πιθανότητα ονομάζεται το \textit{βάρος} του κάθε
σωματιδίου, του οποίου το μέγεθος, θεωρητικά, είναι ευθέως ανάλογο της ακρίβειας
της υπόθεσής του για τη στάση του ρομπότ. Η τελική εκτίμηση του φίλτρου είναι ο
σταθμισμένος μέσος όρος των υποθέσεων στάσης όλων των σωματιδίων κατά το βάρος
του καθενός.

Στην απλούστερή έκδοση των φίλτρων σωματιδίων ο αριθμός των τελευταίων είναι
σταθερός. Για την αποφυγή απόκλισης της εκτίμησης λόγω εξάντλησης των
σωματιδίων \cite{thrun2005probabilistic} ένας μεγάλος αριθμός δειγμάτων είναι
απαραίτητος ώστε το ρομπότ να μπορεί να αντιμετωπίσει τόσο τον αρχικό εντοπισμό
της στάσης του όσο και την παρακολούθηση της μετά από αυτόν. Η πρακτική του
σταθερού αριθμού υποθέσεων μπορεί να είναι μια σοβαρή σπατάλη υπολογιστικών
πόρων μετά τα αρχικά στάδια εντοπισμού. Η δειγματοληψία KLD \cite{Fox2001}
χρησιμοποιείται προκειμένου το φίλτρο να προσαρμόζει τον αριθμό των σωματιδίων
που απαιτούνται με την πάροδο του χρόνου, περιορίζοντας το σφάλμα που εισάγεται
από την αναπαράσταση της εκ των υστέρων πυκνότητας πιθανότητας της στάσης του
ρομπότ με βάση τα δείγματα, και μειώνοντας έτσι των αριθμό των απαιτούμενων
υπολογισμών. Το σφάλμα υπολογίζεται με βάση την απόκλιση Kullback-Leibler
μεταξύ της δειγματοληπτούμενης κατανομής και μιας διακριτής κατανομής που
υπολογίζεται σε ολόκληρο το χάρτη. Στα αρχικά στάδια του εντοπισμού (όταν το
φίλτρο πρέπει να εντοπίσει το ρομπότ βάσει καθολικής αβεβαιότητος), τα
σωματίδια μπορούν να έχουν μεγαλύτερη διασπορά, έτσι ώστε να καλύπτουν
μεγαλύτερο χώρο υποθέσεων. Αντίθετα, αφού το ρομπότ έχει εντοπιστεί με επιτυχία
και το σφάλμα μεταξύ των δύο παραπάνω κατανομών έχει μειωθεί, το φίλτρο
σωματιδίων μπορεί να διατηρήσει ένα μικρότερο σύνολο σωματιδίων για την
παρακολούθηση της στάσης του ρομπότ.

Το φίλτρο σωματιδίων έχει τη δυνατότητα να αφομοιώσει μετρήσεις από αισθητήρες
των οποίων το μοντέλο παρατήρησης μπορεί να ανακατασκευαστεί σε κλειστή μορφή,
και συνήθως χρησιμοποιούνται αισθητήρες sonar, lidar, και εικόνας. Η παρούσα
διατριβή εστιάζει αποκλειστικά στη χρήση αισθητήρων lidar δισδιάστατων
μετρήσεων.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ο αισθητήρας lidar δισδιάστατων μετρήσεων}
\label{subsec:01_01_02_4}

\begin{bw_box}
\begin{definition}
  \label{def:lidar}
  \textit{Ορισμός μέτρησης αισθητήρα 2D lidar}

  Μία μέτρηση συμβατικού αισθητήρα 2D lidar αποτελείται από έναν πεπερασμένο
  αριθμό αποστάσεων σε αντικείμενα σε οπτική επαφή εντός της μέγιστης
  εμβέλειάς του. Οι μετρήσεις λαμβάνονται εγκαρσίως προς το σώμα του, σε
  κανονικά γωνιακά και χρονικά διαστήματα, σε ένα καθορισμένο γωνιακό εύρος
  \cite{Cooper2018a}.

  Μία μέτρηση (αλλιώς ονομαζόμενη σάρωση) $\mathcal{S}$ που απαρτίζεται από
  $N_s$ ακτίνες σε γωνιακό εύρος $\lambda$ είναι μία διατεταγμένη ακολουθία
  $\mathcal{S} : \Theta \rightarrow
  \mathbb{R}_{\geq 0}$, όπου
  \begin{align}
  \Theta = \{\theta_n \in [-\frac{\lambda}{2}, +\frac{\lambda}{2}) :
    \theta_n = -\frac{\lambda}{2} + \lambda \frac{n}{N_s},
  n = 0,1,\dots, N_s-1\}
  \end{align}

  Οι γωνίες $\theta_n$ εκφράζονται σε σχέση με τον προσανατολισμό του αισθητήρα
  στο τοπικό του σύστημα συντεταγμένων.
\end{definition}
\end{bw_box}

Το σχήμα \ref{fig:laser} απεικονίζει τη γεωμετρία του ενός τυπικού αισθητήρα
2D lidar, όπου $d_n = \mathcal{S}[-\frac{\lambda}{2} + \frac{\lambda n}{N_s}]$
είναι η απόσταση που αφορά στην ακτίνα με αναγνωριστικό $n$.

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/laser.tikz}
  \caption{\small Κάτοψη του τοπικού συστήματος αναφοράς ενός τυπικού αισθητήρα
           αποστάσεων τύπου 2D lidar. Ο αισθητήρας είναι τοποθετημένος στο
           $O(0,0)$ και ο προσανατολισμός του είναι αυτός του θετικού $x$
           άξονα. Το γωνιακό πεδίο οράσεώς του είναι $\lambda$}
  \label{fig:laser}
\end{figure}

\begin{bw_box}
\begin{definition}
  \textit{Πανοραμικός αισθητήρας 2D lidar}

  Το γωνιακό εύρος ενός 2D lidar είναι συμμετρικά κατανεμημένο ως προς τον
  τοπικό του $x$ άξονα. Κάθε ακτίνα έχει την ίδια γωνιακή απόσταση από τις
  γειτονικές της, εξαιρέσει των δύο ακραίων ακτίνων όταν $\lambda < 2\pi$.
  Όταν $\lambda = 2\pi$ ο αισθητήρας ονομάζεται πανοραμικός.
\end{definition}
\end{bw_box}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ευθυγράμμιση σαρώσεων lidar}
\label{subsec:01_01_02_5}

Η ευθυγράμμιση σαρώσεων μέσω αισθητήρων lidar βρίσκεται στο επίκεντρο
των περισσότερων εφαρμογών χαρτογράφησης και εκτίμησης
της στάσης ενός οχήματος λόγω της ικανότητάς της να εξάγει τη σχέση μεταξύ
στάσεων από όπου ελήφθησαν μετρήσεις του αισθητήρα. Έστω ένα ρομπότ εξοπλισμένο
με έναν αισθητήρα 2D lidar που καταγράφει δύο σαρώσεις, $\bm{z}$ και
$\bm{z^{\prime}}$, την πρώτη ενώ ο αισθητήρας είναι τοποθετημένος στη στάση
$\bm{p}(x,y,\theta)$, και την δεύτερη ενώ βρίσκεται στη στάση
$\bm{p}^{\prime}(x^{\prime},y^{\prime},\theta^{\prime})$, σε κάποιο σύστημα
αναφοράς. Αυτές οι σαρώσεις καταγράφουν μια οριζόντια τομή του περιβάλλοντος
στο οποίο κινείται το ρομπότ. Υπό την προϋπόθεση ότι ορισμένα τμήματα του
περιβάλλοντος είναι ορατά τόσο από τη στάση $\bm{p}$ όσο και από τη
$\bm{p}^{\prime}$ είναι γενικά δυνατή η εύρεση του τρισδιάστατου
μετασχηματισμού $\bm{q}$ που προβάλλει τα τελικά σημεία του $\bm{z}^{\prime}$
σε εκείνα του $\bm{z}$ με τρόπο τέτοιο ώστε να ευθυγραμμιστούν μεταξύ τους. Η
διαδικασία εξαγωγής του μετασχηματισμού $\bm{q}$ ονομάζεται ευθυγράμμιση
σαρώσεων (scan-matching---εδώ σε μετρήσεις δύο διαστάσεων). Η λύση $\bm{q}$
αποτελείται από δύο μεταφορικές συνιστώσες, $\Delta x$ και $\Delta y$, και μία
περιστροφική συνιστώσα, $\Delta\theta$. Αυτή η λύση αντιστοιχεί στην ακριβώς
αντίστροφη κίνηση του αισθητήρα από τη στάση $\bm{p}$ στην $\bm{p}^{\prime}$:
$\bm{p} = \bm{R}(\Delta\theta) \cdot \bm{p}^{\prime} + [\Delta x, \Delta
y]^{\top}$, όπου $\bm{R}(\cdot)$ είναι ο πίνακας περιστροφής σε δύο διαστάσεις.

Στο σχήμα \ref{fig:sm_principle} απεικονίζεται η ευθυγράμμιση δύο μετρήσεων που
λήφθησαν από στάσεις σε κοντινή απόσταση και στο ίδιο περιβάλλον μέσω του
τελεστή $\texttt{sm}$. Στην πράξη, η εφαρμογή του μετασχηματισμού $\bm{q}^{-1}$
στο διάνυσμα $\bm{p}$ δεν ισούται ακριβώς με $\bm{p}^\prime$ λόγω (α) της
παρουσίας θορύβου στις μετρήσεις του αισθητήρα, (β) ενδεχόμενης ατελούς
αλληλοεπικάλυψης των δύο μετρήσεων σε μη κυρτά περιβάλλοντα, (γ) του γεγονότος
ότι ένας αλγόριθμος ευθυγράμμισης σαρώσεων δεν είναι απαραίτητα τέλειος
τελεστής, και (δ) του γεγονότος ότι ο τελευταίος συνήθως απαιτεί τον καθορισμό
πολλών παραμέτρων, κυριότερες από τις οποίες είναι εκείνες που διέπουν το
χειρισμό των συσχετίσεων ανάμεσα στις ακτίνες των δύο μετρήσεων.

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/sm.eps_tex}
  \vspace{0.5cm}
  \caption{\small Η ευθυγράμμιση των μετρήσεων 2D lidar $\bm{z}(\bm{p})$ και
           $\bm{z}^\prime(\bm{p}^\prime)$ (\underline{s}can-\underline{m}atching)
           παράγει την εκτίμηση $\bm{p}^\prime$ από την $\bm{p}$}
  \label{fig:sm_principle}
\end{figure}

\begin{bw_box}
\begin{definition}
\label{def:sm}
\textit{Ευθυγράμμιση σαρώσεων 2D lidar}

Έστω δύο μετρήσεις ενός 2D lidar αισθητήρα που ικανοποιούν τον ορισμό
\ref{def:lidar}, $\mathcal{S}_R$ και $\mathcal{S}_V$. Έστω ότι οι μετρήσεις
λήφθηκαν στο ίδιο περιβάλλον και τις δύο χρονικές στιγμές καταγραφής τους. Έστω
$\bm{p}_V(x_V,y_V,\theta_V)$ η στάση από την οποία ο αισθητήρας κατέγραψε την
$\mathcal{S}_V$, εκπεφρασμένη σε κάποιo σύστημα συντεταγμένων.  Στόχος της
ευθυγράμμισης σαρώσεων σε δύο διαστάσεις είναι να βρεθεί o τρισδιάστατος
μετασχηματισμός $\bm{q} = (\bm{t}, \theta)$, $\bm{t} = (\Delta x, \Delta y)$,
που ελαχιστοποιεί την απόσταση των τελικών σημείων της μετασχηματιζόμενης κατά
$\bm{q}$ μέτρησης $\mathcal{S}_V$ από την προβολή της στην $\mathcal{S}_R$.
Συμβολίζοντας τα τελικά σημεία του $\mathcal{S}_V$ με $\{\bm{p}_V^i\}$:
\begin{align}
  \underset{\bm{q}}{\min} \sum\limits_i \Big\| \bm{p}_V^i \oplus \bm{q} - \prod \{ \mathcal{S}_R, \bm{p}_V^i \oplus \bm{q}^{-1} \}\Big\|^2
  \label{eq:sm_def}
\end{align}

Το σύμβολο ``$\oplus$" δηλώνει τον τελεστή μετασχηματισμού $\bm{p}_V^i \oplus
(\bm{t}, \theta) \triangleq \bm{R}(\theta) \bm{p}^i_V + \bm{t}$, όπου
$\bm{R}(\theta)$ είναι ο δισδιάστατος πίνακας περιστροφής με όρισμα
$\theta$, και $\prod\{\mathcal{S}_R, \bm{p}_V^i \oplus \bm{q} \}$ είναι η
ευκλείδεια προβολή στην $\mathcal{S}_R$.
\end{definition}
\end{bw_box}




\begin{gg_box}
\begin{remark}
\label{rem:sm_applications}
Η ευθυγράμμιση σαρώσεων χρησιμοποιείται στη ρομποτική ως μέσο οδομετρίας,
πρωτίστως σε μη τροχοφόρα οχήματα (τα οποία συνεπώς δεν έχουν τη δυνατότητα να
φέρουν κωδικοποιητές), ή ως ένας χρήσιμος βελτιωτικός παράγοντας της διαρκώς
παρεκκλίνουσας οδομετρίας με κωδικοποιητές: σαρώσεις που λαμβάνονται σε
διαδοχικές χρονικές στιγμές, εισαγόμενες σε αλγόριθμο ευθυγράμμισης
σαρώσεων, εξάγουν την εκτίμηση της στάσης του αισθητήρα σάρωσης κατά τη
δεύτερη χρονική στιγμή καταγραφής σε σχέση με την πρώτη. Αλγόριθμοι
ευθυγράμμισης σαρώσεων χρησιμοποιούνται με επιτυχία για την επίλυση του
προβλήματος της ταυτόχρονης χαρτογράφησης και εκτίμησης της στάσης οχήματος
\cite{Gutmann,Hahnel,Chieh-ChihWang}, κατασκευή τοπικών χαρτών
\cite{Lacroix2002a,Minguez,Montesano2008a}, και σε συστήματα παρακολούθησης της
τροχιάς ανθρώπων \cite{Schulz}.
\end{remark}
\end{gg_box}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ευθυγράμμιση σαρώσεων lidar με σαρώσεις χάρτη}
\label{subsec:01_01_02_6}

Η τεχνική της ευθυγράμμισης μετρήσεων 2D lidar έχει αποκτήσει τα τελευταία
χρόνια και μία ακόμη εφαρμογή: τη χρήση της για την εκτίμηση της στάσης ενός
οχήματος εντός του χάρτη του περιβάλλοντος στο οποίο βρίσκεται. Η λογική εδώ
είναι ότι εάν αντικατασταθεί η μία από τις δύο μετρήσεις που αναφέρονται στο
περιβάλλον με μία σάρωση που αναφέρεται στο χάρτη του τότε η ευθυγράμμισή
της σάρωσης του χάρτη με τη σάρωση του περιβάλλοντος παρέχει το μετασχηματισμό
που ελαχιστοποιεί το σφάλμα εκτίμησης της στάσης του αισθητήρα στο σύστημα
συντεταγμένων του χάρτη. Συνεπώς η ευθυγράμμιση σαρώσεων lidar με σαρώσεις
χάρτη μπορεί να χρησιμοποιηθεί στα πλαίσια της λύσης προβλημάτων εκτίμησης της
στάσης του αισθητήρα. Κατά συνέπεια, σε αντίθεση με το πρόβλημα της
ευθυγράμμισης σαρώσεων μετρήσεων lidar, το οποίο δεν προϋποθέτει τη γνώση του
χάρτη του περιβάλλοντος, στο πρόβλημα της ευθυγράμμισης σαρώσεων lidar με
σαρώσεις χάρτη η γνώση του τελευταίου είναι αναγκαία συνθήκη.


\begin{bw_box}
\begin{definition}
\label{def:map_scan}
\textit{Ορισμός σάρωσης χάρτη}

Μια σάρωση χάρτη είναι μια εικονική σάρωση που ενσωματώνει τις ίδιες
πληροφορίες με μια σάρωση που προέρχεται από έναν φυσικό αισθητήρα. Μόνο η
υποκείμενη αρχή λειτουργίας τους είναι διαφορετική λόγω του γεγονότος ότι η
σάρωση χάρτη αναφέρεται σε αποστάσεις σε εμπόδια εντός του χάρτη του
περιβάλλοντος του ρομπότ και όχι εντός του το ίδιου του περιβάλλοντος---εξ ου
και η εικονικότητά του. Μία σάρωση χάρτη λαμβάνεται από έναν εικονικό
αισθητήρα και προκύπτει μέσω του εντοπισμού των τομών των ακτίνων που
προέρχονται από την εκτίμηση της στάσης του αισθητήρα και των ορίων των
εμποδίων του χάρτη.
\end{definition}
\end{bw_box}

\begin{bw_box}
\begin{definition}
\label{def:smsm}
\textit{Ευθυγράμμιση σαρώσεων 2D lidar με σαρώσεις χάρτη}

Η ευθυγράμμιση σαρώσεων 2D lidar με σαρώσεις χάρτη ορίζεται με τον ίδιο τρόπο
όπως η ευθυγράμμιση σαρώσεων 2D lidar (ορισμός \ref{def:sm}) αλλά με το
$\mathcal{S}_V$ να προέρχεται όχι από το φυσικό περιβάλλον του ρομπότ αλλά
από το χάρτη του.
\end{definition}
\end{bw_box}


\begin{gg_box}
\begin{remark}
Το όφελος της ευθυγράμμισης α) μιας σάρωσης χάρτη που προέρχεται από έναν
εικονικό αισθητήρα, από την εκτιμώμενη στάση του σε αυτόν με (β) μια σάρωση
που προέρχεται από έναν φυσικό αισθητήρα, από την πραγματική του στάση είναι
ότι η διόρθωση της εκτίμησης της στάσης του αισθητήρα παρέχει τη διόρθωση της
εκτίμησης της στάσης του ρομπότ: Έστω ότι η εκτίμηση της στάσης ενός ρομπότ
βρίσκεται στη γειτονιά της πραγματικής στάσης του. Αν υποτεθεί ότι ο
αισθητήρας απόστασης είναι σταθερά στην ίδια στάση σε σχέση με το ρομπότ τόσο
στο πραγματικό όσο και στο εικονικό περιβάλλον τότε ο μετασχηματισμός των
τελικών σημείων της εικονικής σάρωσης που ελαχιστοποιεί την απόσταση από την
προβολή τους στη φυσική σάρωση ισούται με το μετασχηματισμό που, όταν
εφαρμοστεί στην εκτιμώμενη στάση του ρομπότ ελαχιστοποιεί το σφάλμα της σε
σχέση με την πραγματική του στάση. Επομένως η εξαγωγή του σχετικού
μετασχηματισμού της εικονικής σάρωσης σε σχέση με την πραγματική σάρωση
μπορεί να χρησιμοποιηθεί ως διόρθωση της εκτίμησης της θέσης του ρομπότ εντός
του χάρτη. Η βαρύτητα της σημασίας αυτής της διόρθωσης έγκειται στο γεγονός
ότι η τελευταία μπορεί να χρησιμοποιηθεί για να να μειώσει το σφάλμα
εκτίμησης της θέσης του ρομπότ κατά την παρακολούθηση της στάσης του, ή για
να διευκολύνει την εύρεση της στάσης του υπό καθολική αβεβαιότητα.
\end{remark}
\end{gg_box}


Στο σχήμα \ref{fig:smsm_principle} απεικονίζεται η ευθυγράμμιση μίας μέτρησης
$\mathcal{S}_R$ με μία εικονική μέτρηση $\mathcal{S}_V$ μέσω του τελεστή
$\texttt{smsm}$.


\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/smsm.pdf_tex}
  \vspace{0.5cm}
  \caption{\small Η ευθυγράμμιση της 2D εικονικής μέτρησης $\mathcal{S}_V(\hat{\bm{p}})$ με
           τη φυσική μέτρηση 2D lidar $\mathcal{S}_R(\bm{p})$
           (\underline{s}can-to-\underline{m}ap-\underline{s}can
           \underline{m}atching) μειώνει το σφάλμα εκτίμησης σε
           $\hat{\bm{p}}^\prime \approx \bm{p}$:
           $\|\hat{\bm{p}}^\prime - \bm{p}\| < \|\hat{\bm{p}}- \bm{p}\|$. Τα
           κόκκινα σημεία υποδηλώνουν τη φυσική μέτρηση $\mathcal{S}_R(\bm{p})$,
           ενώ τα γκρι την εικονική μέτρηση $\mathcal{S}_V(\hat{\bm{p}})$.
           Η μεταβολή της μορφής της εικονικής μέτρησης οφείλεται στο γεγονός
           ότι από διαφορετικές στάσεις εντός του χάρτη είναι ορατά διαφορετικά
           σημεία του: η εικονική μέτρηση προσομοιάζει όλο και περισσότερο
           τη φυσική μέτρηση όσο το σφάλμα εκτίμησης της στάσης μειώνεται}
  \label{fig:smsm_principle}
\end{figure}

\begin{gg_box}
\begin{remark}
\label{rem:iterative}
Σε αντίθεση με το πρόβλημα της ευθυγράμμισης πραγματικών σαρώσεων, η
ευθυγράμμιση πραγματικών και εικονικών σαρώσεων είναι ένα εγγενώς συζευγμένο
πρόβλημα: δεδομένου του γεγονότος ότι η γεωμετρία των τελικών σημείων των
ακτίνων της εικονικής σάρωσης μπορεί να ευθυγραμμιστεί, χωρίς βλάβη της
γενικότητας, μόνο από την πραγματική στάση του ρομπότ, ο προσανατολισμός του
ρομπότ μπορεί να εξαχθεί εάν και μόνον εάν η εκτίμηση της θέσης του συμπίπτει
με την πραγματική του θέση, και η θέση του μπορεί να εξαχθεί μόνο εάν και
μόνον εάν η εκτίμηση προσανατολισμού του είναι ίση με τον πραγματικό του
προσανατολισμό. Ωστόσο, και τα δύο είναι, κατ' αρχήν, άνισα. Αυτή η σύζευξη
είναι ο λόγος για τον οποίο απαιτείται μια επαναληπτική μέθοδος όσο αφορά
στην λύση της ευθυγράμμισης πραγματικών και εικονικών σαρώσεων.
\end{remark}
\end{gg_box}

\begin{gg_box}
\begin{remark}
Σε αντίθεση με την ευθυγράμμιση μετρήσεων, όπου η $\mathcal{S}_V$ είναι μια
αμετάβλητη μέτρηση επιφορτωμένη με αναπόφευκτα σφάλματα λόγω τυφλών σημείων,
στην ευθυγράμμιση πραγματικών μετρήσεων και εικονικών σαρώσεων η
$\mathcal{S}_V$ παράγεται από το χάρτη, ο οποίος αποτυπώνει τo περιβάλλον του
ρομπότ στο σύνολό του, μεταφέροντας έτσι αυτή την ιδιότητα στην εικονική
σάρωση. Αυτή η λεπτή διαφορά καθιστά κατ' αρχήν δυνατή την ευθυγράμμιση της
εικονικής σάρωσης $\mathcal{S}_V$ με την αμετάβλητη μέτρηση $\mathcal{S}_R$
\begin{itemize}
  \item με μέγιστη ακρίβεια: η ανάκτηση της πραγματικής στάσης του ρομπότ
        μπορεί να γίνει με αυθαίρετη ακρίβεια (στην ιδανική περίπτωση τέλειων
        μετρήσεων και πλήρους σύμπτωσης χάρτη και περιβάλλοντος)
  \item χωρίς την ανάγκη να δημιουργηθούν αντιστιχίες μεταξύ των ακτίνων των
        δύο σαρώσεων (καθώς η λειτουργία αυτή επινοήθηκε για και κυρίως
        διευκολύνει την αντιστοίχιση συνόλων που κατ' αρχήν επικαλύπτονται σε
        ορισμένες περιοχές αλλά όχι σε άλλες, δηλαδή για το έργο της
        ευθυγράμμισης μετρήσεων)
\end{itemize}
\end{remark}
\end{gg_box}

\begin{gg_box}
\begin{remark}
Η σημασία της αποφυγής χρήσης αντιστοιχιών---εκτός από το γεγονός ότι δεν είναι
αυστηρά απαραίτητες για την ευθυγράμμιση πραγματικών μετρήσεων και εικονικών
σαρώσεων--- έγκειται στο γεγονός ότι η αποφυγή τους συμπαρασύρει και την
αποφυγή χρήσης των εξωτερικά καθορίσιμων παραμέτρων που διέπουν τη λειτουργία των
αλγορίθμων ευθυγράμμισης. Μέθοδοι ευθυγράμμισης που βασίζονται στην εφεύρεση
και χρήση αντιστοιχιών απαιτούν τη ρύθμιση των εν λόγω παραμέτρων, ο
προσδιορισμός ορισμένων από τις οποίες έχει αποδειχθεί ότι είναι μη
διαισθητικός, απαιτητικός, και όχι καθολικά αρμόζων σε οποιοδήποτε
περιβάλλον ή ακόμη και για διαφορετικές στάσεις στο ίδιο περιβάλλον.
\end{remark}
\end{gg_box}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Το λειτουργικό σύστημα ρομπότ ROS}
\label{subsec:01_01_02_7}

Το ROS είναι ένα μετα-λειτουργικό σύστημα ανοικτού κώδικα για την εκτέλεση
εφαρμογών που αφορούν στη ρομποτική από το υπολογιστικό σύστημα που φέρει ένα
ρομπότ \cite{Ng2009}. Παρέχει αφαίρεση υλικού (hardware abstraction), έλεγχο
συσκευών χαμηλού επιπέδου, υλοποίηση συχνά χρησιμοποιούμενων λειτουργιών,
διακίνηση μηνυμάτων μεταξύ διεργασιών, και διαχείριση πακέτων. Παρέχει επίσης
εργαλεία και βιβλιοθήκες για την απόκτηση, την κατασκευή, τη συγγραφή, και την
εκτέλεση κώδικα. Ο "γράφος" του ROS σε χρόνο εκτέλεσης είναι ένα δίκτυο
peer-to-peer διεργασιών που συνδέονται χρησιμοποιώντας την υποδομή επικοινωνίας
του ROS.

Ένα από τα κύρια πλεονεκτήματα του ROS είναι η τυποποίηση των τύπων μηνυμάτων
επικοινωνίας, χρησιμοποιώντας μια απλή γλωσσικά ουδέτερη IDL (Interface
Definition Language) για την περιγραφή τους, με αποτέλεσμα την ικανότητα
υλοποίησης λογισμικού χωρίς γλωσσικές ιδιαιτερότητες. Αυτή η τυποποίηση
επιτρέπει την ανάπτυξη αποσυνδεδεμένων πακέτων ROS, δηλαδή εύκολα
επαναχρησιμοποιήσιμων συλλογών \textit{κόμβων}. Ένας κόμβος είναι μια
υπολογιστική διεργασία που εκτελεί υπολογισμούς που προσφέρουν συγκεκριμένη
λειτουργικότητα. Οι κόμβοι συνδυάζονται μαζί σε έναν γράφο και επικοινωνούν
μεταξύ τους ασύχγρονα, χρησιμοποιώντας θέματα (topics), ή/και σύγχρονα, μέσω
υπηρεσιών κλήσης απομακρυσμένων
διαδικασιών.\footnote{\url{http://wiki.ros.org/Nodes}} Στο ROS ένα ρομποτικό
σύστημα αποτελείται συνήθως από πολλούς κόμβους.  Οι απαιτήσεις του υλικού του
ROS είναι ελάχιστες σε επεξεργαστική ισχύ και μνήμη, καθιστώντας το ικανό να
εκτελεστεί σε ένα Raspberry Pi ή ένα BeagleBone, ωστόσο οι πραγματικές
απαιτήσεις του ποικίλουν ανάλογα με το ανάλογα με τον αριθμό και τον τύπο των
κόμβων που έχει αναλάβει να εκτελέσει ένα ρομπότ.

Για τους σκοπούς της διατριβής το ROS χρησιμοποιείται σε συνδυασμό με πραγματικά
ή προσομοιωμένα περιβάλλοντα, αισθητήρες, και ρομπότ, για την εμβάθυνση
της έρευνας στο πεδίο εφαρμογής \ref{scope}, και για την διεξαγωγή πειραμάτων
και προσομοιώσεων με βάση προτεινόμενες μεθόδους και μεθόδους της βιβλιογραφίας.
