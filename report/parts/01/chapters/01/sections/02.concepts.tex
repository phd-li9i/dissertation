%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Εκτιμητέο διάνυσμα κατάστασης}
\label{subsection:01_01_02:01}

Κεντρικής σημασίας στη διατριβή είναι το εκτιμητέο διάνυσμα κατάστασης ενός
επίγειου οχήματος. Μέχρι σε αυτό το σημείο χρησιμοποιείτο αντί αυτού η λέξη
``θέση" για εισαγωγικούς λόγους.

\begin{bw_box}
\begin{definition}
  \textit{Διάνυσμα κατάστασης: η στάση}

Ως διάνυσμα κατάστασης θεωρούμε τη στάση $\bm{p}$ ενός οχήματος στο δισδιάστατο
επίπεδο: τον ειρμό της θέσης του $(x,y)$ με τον προσανατολισμό του $\theta$,
ως προς το σύστημα αναφοράς του χάρτη του περιβάλλοντος στο οποίο βρίσκεται
το όχημα (σχήμα \ref{fig:pose_figure}):
  \begin{align}
    \bm{p} = [x \ y \ \theta]^\top
\end{align}

\end{definition}
\end{bw_box}

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/pose.eps_tex}
  \caption{\small Απεικόνιση του διανύσματος κατάστασης (στάση) $\bm{p} = [x,y,\theta]^\top$
           ενός επίγειου οχήματος στο οριζόντιο επίπεδο}
  \label{fig:pose_figure}
\end{figure}

Η ακριβής γνώση της στάσης του οχήματος είναι απαγορευμένη (Παρατήρηση
\ref{remark:observable}): η \textit{εκτίμηση} $\hat{\bm{p}}$ της στάσης του
$\bm{p}$ είναι το αντικείμενο των αλγορίθμων εύρεσης στάσης.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Τα δύο κύρια προβλήματα εκτίμησης στάσης}
\label{subsec:01_01_02_2}

Τα δύο κύρια προβλήματα εκτίμησης της στάσης ενός οχήματος (σχήμα
\ref{fig:localisation_problems_pie}) διακρίνονται βάσει του εύρους της
αβεβαιότητας που διαθέτει το όχημα για αυτήν. Και τα δύο προϋποθέτουν
κατ' ελάχιστον τη γνώση του χάρτη του περιβάλλοντος στο οποίο
βρίσκεται το όχημα (το μόνο σύστημα αναφοράς είναι αυτό του χάρτη και χωρίς
αυτό είναι αδόκιμη η εκτίμηση της στάσης του οχήματος) και μετρήσεις από
τουλάχιστον έναν αισθητήρα αντίληψης του περιβάλλοντός του.

Το πρόβλημα της εύρεσης-εκτίμησης της στάσης του βάσει καθολικής αβεβαιότητος
(global localisation) αναφέρεται στη συνθήκη όπου η μόνη επιπρόσθετη γνώση που
διαθέτει το ρομπότ είναι ότι βρίσκεται εντός των ορίων του χάρτη: δεν υπάρχει
εκ των προτέρων γνώση για τη στάση του. Για τη λύση του προβλήματος το ρομπότ
πρέπει να συλλέξει μετρήσεις από τους αισθητήρες του και να τις αντιπαραβάλλει
με το χάρτη του περιβάλλοντός. Εάν η εκτίμηση της στάσης ισούται με την
πραγματική του στάση τότε εικονικές μετρήσεις ή χαρακτηριστικά του χάρτη που
αντιλαμβάνεται το ρομπότ από την εκτίμηση της στάσης του προσεγγίζουν τις
αντίστοιχες πραγματικές μετρήσεις ή χαρακτηριστικά του περιβάλλοντος με
μεγαλύτερη πιστότητα από άλλες υποθέσεις για τη στάση του (σχήμα
\ref{fig:global_localisation}).

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/global_localisation.eps_tex}
  \caption{\small Το πρόβλημα της εκτίμησης της στάσης ενός ρομπότ βάσει καθολικής
           αβεβαιότητας της στάσης του. Το ρομπότ βρίσκεται στη θέση που
           σημειώνεται με πράσινο. Οι κουκκίδες που σημειώνονται με πορτοκαλί
           δείχνουν υποθέσεις προς εξέταση για την εκτίμηση της στάσης του}
  \label{fig:global_localisation}
\end{figure}


\begin{bw_box}
\begin{definition}
  \label{definition:01_01_02_02:01}
  \textit{Παθητική και ενεργητική εκτίμηση βάσει καθολικής αβεβαιότητος}

  Ένας τρόπος ταξινόμησης των υπαρχουσών λύσεων στο πρόβλημα
  της εκτίμησης της στάσης ενός ρομπότ βάσει καθολικής αβεβαιότητος είναι μέσω
  του ίδιου του συστήματος πλοήγησης του ρομπότ. Προκειμένου να μεγιστοποιηθεί
  η πιθανότητα επιτυχούς εντοπισμού, οι προσεγγίσεις \textit{ενεργητικής}
  εκτίμησης υπολογίζουν εντολές κίνησης που μετακινούν το ρομπότ εντός του
  περιβάλλοντός του σε στάσεις που επιτρέπουν στο σύστημα εκτίμησης της στάσης
  του να αποκτάει πρόσθετες πληροφορίες. Εάν οι εντολές κίνησης---εάν
  υπάρχουν---προσδιορίζονται χωρίς τη συμβουλή του συστήματος εκτίμησης στάσης
  τότε η προσέγγιση εκτίμησης ονομάζεται \textit{παθητική}.
\end{definition}
\end{bw_box}

\begin{gg_box}
\begin{remark}
  \label{remark:01_01_02_02:01}
  \textit{Ακρίβεια λύσης}

  Μια ακριβής λύση στο πρόβλημα της εκτίμησης της στάσης ενός ρομπότ βάσει
  καθολικής αβεβαιότητος είναι αναγκαία προϋπόθεση για την επίλυση του
  επακόλουθου προβλήματος της παρακολούθησης της στάσης του καθώς αυτό κινείται
  στο χώρο. Τα τελευταία χρόνια οι πιθανοτικές προσεγγίσεις στο πρόβλημα της
  παρακολούθησης της στάσης έχουν έχουν καταστεί εκ των ων ουκ άνευ. Χάρει στην
  ανοχή τους για αυξημένη αβεβαιότητα στάσης, η απαίτηση μέγιστης ακρίβειας
  όσον αφορά στη λύση του προβλήματος εκτίμησης βάσει καθολικής αβεβαιότητος
  έχει, κατά συνέπεια, μετριαστεί. Εάν χρησιμοποιούνται πιθανοτικές μέθοδοι στο
  μετέπειτα έργο της εκτίμησης στάσης βάσει περιορισμένης αβεβαιότητος, τότε ως
  λύση στο πρόβλημα της εκτίμησης βάσει καθολικής αβεβαιότητας μπορεί να γίνει
  δεκτό ένα σύνολο ανακριβέστερων (και συνεπώς χωρικά εκτεταμένων) στάσεων. Μια
  λύση που βρίσκεται σε μία γειτονιά της πραγµατική στάσης ενός ροµπότ, µε
  άµεση οπτική επαφή σε αυτήν, θα αναφέρεται ως ορθή λύση.
\end{remark}
\end{gg_box}


\begin{gg_box}
\begin{remark}
  \textit{Λύση πραγματικού χρόνου}
  \label{remark:01_01_02_02:02}

  Στο πρόβλημα της εκτίμησης βάσει καθολικής αβεβαιότητος δεν υπάρχει αυστηρή
  απαίτηση για λύση σε πραγματικό χρόνο στην περίπτωση παθητικών προσεγγίσεων,
  εάν το ρομπότ δεν κινείται κατά τη διάρκεια της λύσης του προβλήματος
  εκτίμησης.
\end{remark}
\end{gg_box}

Αντιθέτως, το πρόβλημα της εκτίμησης της στάσης του βάσει περιορισμένης
αβεβαιότητας (pose tracking) δέχεται ως δεδομένη τη γνώση της αρχικής του
στάσης. Στόχος της λύσης του προβλήματος είναι η διαρκής εκτίμηση της στάσης
του καθώς το ρομπότ κινείται μέσα στο χώρο στο πέρασμα του χρόνου. Για την
επίλυσή του είναι εξαιρετικά επιτυχημένη η χρήση πιθανοτικών προσεγγίσεων, όπως
το φίλτρο Kalman \cite{Maybeck1979} και το φίλτρο σωματιδίων
\cite{Thrun2002a,Gustafsson2002}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Το φίλτρο σωματιδίων}
\label{subsec:01_01_02_3}

Οι πιθανοτικές προσεγγίσεις στο πρόβλημα της εκτίμησης της στάσης έχουν
αυξημένη ακρίβεια και ευρωστία σε σύγκριση με τις μη πιθανοτικές, αλλά, ανάλογα
με τη φύση τους, πάσχουν ή επιλύουν διάφορα προβλήματα που αφορούν στους
σκοπούς εκτίμησης. Για παράδειγμα τα φίλτρα Kalman είναι γνωστό ότι είναι
εύρωστα και ακριβή (βέλτιστα ακόμα όταν όλοι οι συστημικοί θόρυβοι είναι
κατανεμημένοι κανονικά), αλλά δεν έχουν την ικανότητα να αναπαριστούν
αμφισημίες (ambiguities) ως προς τη στάση ή να εντοπίζουν το ρομπότ στην
περίπτωση άγνωστης αρχικής στάσης. Από την άλλη πλευρά η φύση των τεχνικών MCL
\cite{Dellaert} τούς επιτρέπει να αναπαριστούν την αβεβαιότητα ως προς τη στάση
του ρομπότ διατηρώντας ένα σύνολο υποθέσεων για αυτή (που ονομάζονται
σωματίδια), του οποίου η μορφή δεν δεσμεύεται από συναρτήσεις πυκνότητας
πιθανότητας μίας κορυφής (unimodal) όπως στα φίλτρα Kalman. Μεταξύ άλλων αυτή η
αναπαράσταση επιτρέπει στις προσεγγίσεις MCL να εντοπίζουν καθολικά ένα ρομπότ
και να παρακολουθούν τις αμφισημίες της στάσης του μέχρι να είναι σε θέση να
τις επιλύσουν, λόγω της δυνατότητας αναπαράστασης αυθαίρετα πολύπλοκων
πυκνοτήτων πιθανότητας. Το σχήμα \ref{fig:pf_init} απεικονίζει ένα παράδειγμα
κατανομής υποθέσεων στάσης μετά το στάδιο της αρχικοποίησης του φίλτρου
σωματιδίων.

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/pf_init.eps_tex}
  \caption{\small Αρχικοποίηση κατανομής σωματιδίων δεδομένης εκτίμησης για την
           αρχική στάση. Η πληροφορία προσανατολισμού παραλείπεται για λόγους
           ευανάγνωσης. Στην αρχική φάση το φίλτρο δεν έχει συγκλίνει και
           συνεπώς η διακύμανσή του συνόλου υποθέσεων στάσης είναι μέγιστη}
  \label{fig:pf_init}
\end{figure}

Τα φίλτρα σωματιδίων εκτιμούν αναδρομικά την εκ των υστέρων πυκνότητα
πιθανότητας της στάσης ενός οχήματος βάσει λογικής Bayes
\cite{thrun2005probabilistic}:
\begin{align}
  \label{eq:pf_posterior}
  p(\bm{p}_t | \bm{z}_{1:t}, \bm{u}_{0,t-1}, \bm{M}) \propto & \nonumber \\
    p(\bm{z}_t | \bm{p}_t) &\int\limits_{\bm{p}^{\prime}} p(\bm{p}_t | \bm{p}^{\prime}, \bm{u}_{t-1}) \cdot p(\bm{p}^{\prime} | \bm{z}_{1:t-1}, \bm{u}_{0:t-2}, \bm{M}) dx^{\prime}
\end{align}
όπου η στάση του ρομπότ τη χρονική στιγμή $t$ συμβολίζεται με $\bm{p}_t$, η
ακολουθία των εντολών κίνησης που εκτελούνται από το ρομπότ με
$\bm{u}_{0:t-1}$, και με $\bm{z}_{0:t}$ η ακολουθία των μετρήσεων που γίνονται
από τους αισθητήρες του. $\bm{M}$ είναι ο χάρτης που αναπαριστά το περιβάλλον
στο οποίο κινείται το ρομπότ. Το μοντέλο κίνησης $p(\bm{p}_t | \bm{p}_{t-1},
\bm{u}_{t-1})$ υποδηλώνει την πιθανότητα ότι τη χρονική στιγμή $t$ το ρομπότ
καταλήγει στην κατάσταση $\bm{p}_t$ δεδομένου ότι εκτελεί την εντολή κίνησης
$\bm{u}_{t-1}$ ενώ βρίσκεται στην κατάσταση $\bm{p}_{t-1}$ τη χρονική στιγμή
$t-1$. Σε ρομπότ με τροχούς οι εντολές κίνησης συνήθως αντικαθίστανται από
μετρήσεις της περιστροφής τους μέσω κωδικοποιητών (encoders), οι οποίες
αναφέρονται ως \textit{οδομετρία}. Το μοντέλο παρατήρησης $p(\bm{z}_t |
\bm{p}_t, \bm{M})$ δηλώνει την πιθανότητα μέτρησης $\bm{z}_t$ ενώ το ρομπότ
βρίσκεται στη στάση $\bm{p}_t$.

Δεδομένου ότι τα φίλτρα σωματιδίων διατηρούν ένα σύνολο διαφορετικών υποθέσεων
ως προς την κατάσταση του ρομπότ, η κάθε μία σταθμίζεται σύμφωνα με την
πιθανότητα το ρομπότ να διενεργήσει τη μέτρηση $\bm{z}_t$ υπό τη συγκεκριμένη
υπόθεση στάσης ενός σωματιδίου $\bm{p}_t^i$ με βάση το μοντέλο παρατήρησης
$p(\bm{z}_t | \bm{p}_t, \bm{M})$, όπου $i$ δηλώνει τον δείκτη-αναγνωριστικό του
σωματιδίου-υπόθεσης $i$. Αυτή η πιθανότητα ονομάζεται το \textit{βάρος} του
κάθε σωματιδίου, του οποίου το μέγεθος, θεωρητικά, είναι ευθέως ανάλογο της
ακρίβειας της υπόθεσής του για τη στάση του ρομπότ. Η τελική εκτίμηση του
φίλτρου είναι ο σταθμισμένος μέσος όρος των υποθέσεων στάσης όλων των
σωματιδίων κατά το βάρος του καθενός.

Στην απλούστερή έκδοση των φίλτρων σωματιδίων ο αριθμός των τελευταίων είναι
σταθερός. Για την αποφυγή απόκλισης της εκτίμησης λόγω εξάντλησης των
σωματιδίων \cite{thrun2005probabilistic} ένας μεγάλος αριθμός δειγμάτων είναι
απαραίτητος ώστε το ρομπότ να μπορεί να αντιμετωπίσει τόσο τον αρχικό εντοπισμό
της στάσης του όσο και την παρακολούθηση της μετά από αυτόν. Η πρακτική του
σταθερού αριθμού υποθέσεων μπορεί να είναι μια σοβαρή σπατάλη υπολογιστικών
πόρων μετά τα αρχικά στάδια εντοπισμού. Η δειγματοληψία KLD \cite{Fox2001}
χρησιμοποιείται προκειμένου το φίλτρο να προσαρμόζει τον αριθμό των σωματιδίων
που απαιτούνται με την πάροδο του χρόνου, περιορίζοντας το σφάλμα που εισάγεται
από την αναπαράσταση της εκ των υστέρων πυκνότητας πιθανότητας της στάσης του
ρομπότ με βάση τα δείγματα, και μειώνοντας έτσι των αριθμό των απαιτούμενων
υπολογισμών. Το σφάλμα υπολογίζεται με βάση την απόκλιση Kullback-Leibler
μεταξύ της δειγματοληπτούμενης κατανομής και μιας διακριτής κατανομής που
υπολογίζεται σε ολόκληρο το χάρτη. Στα αρχικά στάδια του εντοπισμού (όταν το
φίλτρο πρέπει να εντοπίσει το ρομπότ βάσει καθολικής αβεβαιότητος), τα
σωματίδια μπορούν να έχουν μεγαλύτερη διασπορά, έτσι ώστε να καλύπτουν
μεγαλύτερο χώρο υποθέσεων. Αντίθετα, αφού το ρομπότ έχει εντοπιστεί με επιτυχία
και το σφάλμα μεταξύ των δύο παραπάνω κατανομών έχει μειωθεί, το φίλτρο
σωματιδίων μπορεί να διατηρήσει ένα μικρότερο σύνολο σωματιδίων για την
παρακολούθηση της στάσης του ρομπότ.

Το φίλτρο σωματιδίων έχει τη δυνατότητα να αφομοιώσει μετρήσεις από αισθητήρες
των οποίων το μοντέλο παρατήρησης μπορεί να ανακατασκευαστεί σε κλειστή μορφή,
και συνήθως χρησιμοποιούνται αισθητήρες sonar, lidar, και εικόνας. Η παρούσα
διατριβή εστιάζει αποκλειστικά στη χρήση αισθητήρων lidar δισδιάστατων
μετρήσεων.

\begin{gg_box}
\begin{remark}
  \textit{Λύση πραγματικού χρόνου}
  \label{remark:01_01_02_02:03}

  Σε αντίθεση με τις παθητικές προσεγγίσεις εκτίμησης της στάσης του ρομπότ
  βάσει καθολικής αβεβαιότητος σε περίπτωση που το ρομπότ θεωρείται ακίνητο,
  η επίλυση του προβλήματος της εκτίμησης της στάσης του βάσει πεπερασμένης
  αβεβαιότητος απαιτεί εξ ορισμού τη συχνή ανανέωση εκτιμήσεων στάσης, καθώς η
  στάση του ρομπότ μεταβάλλεται μέσα στο χώρο και κατά τη διάρκεια του χρόνου.
\end{remark}
\end{gg_box}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ο αισθητήρας lidar δισδιάστατων μετρήσεων}
\label{subsec:01_01_02_4}

\begin{bw_box}
\begin{definition}
  \label{def:lidar}
  \textit{Ορισμός μέτρησης αισθητήρα 2D lidar}

  Μία μέτρηση συμβατικού αισθητήρα lidar δισδιάστατων μετρήσεων αποτελείται από
  έναν πεπερασμένο αριθμό αποστάσεων σε αντικείμενα που βρίσκονται σε άμεση
  οπτική επαφή εντός της μέγιστης εμβέλειάς του. Οι μετρήσεις λαμβάνονται
  εγκαρσίως προς το σώμα του, σε κανονικά γωνιακά και χρονικά διαστήματα, σε
  ένα καθορισμένο γωνιακό εύρος \cite{Cooper2018a}.

  Μία μέτρηση (αλλιώς ονομαζόμενη σάρωση) $\mathcal{S}$ που απαρτίζεται από
  $N_s$ ακτίνες σε γωνιακό εύρος $\lambda$ είναι μία διατεταγμένη ακολουθία
  $\mathcal{S} : \Theta \rightarrow
  \mathbb{R}_{\geq 0}$, όπου
  \begin{align}
  \Theta = \{\theta_n \in [-\frac{\lambda}{2}, +\frac{\lambda}{2}) :
    \theta_n = -\frac{\lambda}{2} + \lambda \frac{n}{N_s},
  n = 0,1,\dots, N_s-1\}
  \end{align}

  Οι γωνίες $\theta_n$ εκφράζονται σε σχέση με τον προσανατολισμό του αισθητήρα
  στο τοπικό του σύστημα συντεταγμένων.
\end{definition}
\end{bw_box}

Το σχήμα \ref{fig:laser} απεικονίζει τη γεωμετρία του ενός τυπικού αισθητήρα
2D lidar, όπου $d_n = \mathcal{S}[-\frac{\lambda}{2} + \frac{\lambda n}{N_s}]$
είναι η απόσταση που αφορά στην ακτίνα με αναγνωριστικό $n$.

\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/laser.tikz}
  \caption{\small Κάτοψη του τοπικού συστήματος αναφοράς ενός τυπικού αισθητήρα
           αποστάσεων lidar που λαμβάνει δισδιάστατες μετρήσεις. Ο αισθητήρας
           είναι τοποθετημένος στο $O(0,0)$ και ο προσανατολισμός του είναι
           αυτός του θετικού $x$ άξονα. Το γωνιακό πεδίο οράσεώς του είναι
           $\lambda$}
  \label{fig:laser}
\end{figure}

\begin{bw_box}
\begin{definition}
  \label{def:panoramic_lidar_sensor}
  \textit{Πανοραμικός αισθητήρας 2D lidar}

  Το γωνιακό εύρος ενός 2D lidar είναι συμμετρικά κατανεμημένο ως προς τον
  τοπικό του $x$ άξονα. Κάθε ακτίνα έχει την ίδια γωνιακή απόσταση από τις
  γειτονικές της, εξαιρέσει των δύο ακραίων ακτίνων όταν $\lambda < 2\pi$.
  Όταν $\lambda = 2\pi$ ο αισθητήρας ονομάζεται πανοραμικός.
\end{definition}
\end{bw_box}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ευθυγράμμιση σαρώσεων lidar}
\label{subsec:01_01_02_5}

Η ευθυγράμμιση σαρώσεων μέσω αισθητήρων lidar βρίσκεται στο επίκεντρο των
περισσότερων εφαρμογών χαρτογράφησης και εκτίμησης της στάσης ενός οχήματος
λόγω της ικανότητάς της να εξάγει τη σχέση μεταξύ στάσεων από όπου ελήφθησαν
μετρήσεις του αισθητήρα. Έστω ένα ρομπότ εξοπλισμένο με έναν αισθητήρα 2D lidar
που καταγράφει δύο σαρώσεις, $\bm{z}_0$ και $\bm{z}_1$, την πρώτη ενώ ο
αισθητήρας είναι τοποθετημένος στη στάση $\bm{p}_0(x_0,y_0,\theta_0)$, και την
δεύτερη ενώ βρίσκεται στη στάση $\bm{p}_1(x_1,y_1,\theta_1)$, σε κάποιο σύστημα
αναφοράς. Αυτές οι σαρώσεις καταγράφουν μια οριζόντια τομή του περιβάλλοντος
στο οποίο κινείται το ρομπότ. Υπό την προϋπόθεση ότι ορισμένα τμήματα του
περιβάλλοντος είναι ορατά τόσο από τη στάση $\bm{p}_0$ όσο και από τη
$\bm{p}_1$ είναι γενικά δυνατή η εύρεση του τρισδιάστατου μετασχηματισμού
$\bm{q}$ που προβάλλει τα τελικά σημεία του $\bm{z}_1$ σε εκείνα του $\bm{z}_0$
με τρόπο τέτοιο ώστε να ευθυγραμμιστούν μεταξύ τους με το μικρότερο σφάλμα. Η
διαδικασία εξαγωγής του μετασχηματισμού $\bm{q}$ ονομάζεται ευθυγράμμιση
σαρώσεων (scan-matching---εδώ σε μετρήσεις δύο διαστάσεων). Η λύση $\bm{q}$
αποτελείται από δύο μεταφορικές συνιστώσες, $\Delta x$ και $\Delta y$, και μία
περιστροφική συνιστώσα, $\Delta\theta$. Αυτή η λύση αντιστοιχεί στην ακριβώς
αντίστροφη κίνηση του αισθητήρα από τη στάση $\bm{p}_0$ στην $\bm{p}_1$:
$\bm{p}_0 = \bm{R}(\Delta\theta) \cdot \bm{p}_1 + [\Delta x, \Delta y]^{\top}$,
όπου $\bm{R}(\cdot)$ είναι ο πίνακας περιστροφής σε δύο διαστάσεις.

Στο σχήμα \ref{fig:sm_principle} απεικονίζεται η ευθυγράμμιση δύο μετρήσεων που
ελήφθησαν από στάσεις σε κοντινή απόσταση και στο ίδιο περιβάλλον μέσω του
τελεστή $\texttt{sm}$ (\underline{s}can-\underline{m}atching). Στην πράξη η
εφαρμογή του μετασχηματισμού $\bm{q}^{-1}$ στο διάνυσμα $\bm{p}_0$ δεν ισούται
ακριβώς με $\bm{p}_1$ λόγω (α) της παρουσίας θορύβου στις μετρήσεις του
αισθητήρα, (β) ενδεχόμενης ατελούς αλληλοεπικάλυψης των δύο μετρήσεων σε μη
κυρτά περιβάλλοντα, (γ) του γεγονότος ότι ένας αλγόριθμος ευθυγράμμισης
σαρώσεων δεν είναι απαραίτητα τέλειος τελεστής, και (δ) του γεγονότος ότι ο
τελευταίος συνήθως απαιτεί τον καθορισμό πολλών παραμέτρων, κυριότερες από τις
οποίες είναι εκείνες που διέπουν τις αντιστοιχίσεις των ακτίνων των δύο
μετρήσεων.

\begin{figure}[htbp]\centering\vspace{1cm}
  \input{./figures/parts/01/chapters/01/sections/02/sm.eps_tex}
  \vspace{0.5cm}
  \caption{\small Η ευθυγράμμιση των μετρήσεων 2D lidar $\bm{z}_0(\bm{p}_0)$ και
           $\bm{z}_1(\bm{p}_1)$ (\underline{s}can-\underline{m}atching)
           παράγει την εκτίμηση $\bm{p}_1$ από την $\bm{p}_0$. Αυτό σημαίνει πως
           καθώς κινείται }
  \label{fig:sm_principle}
\end{figure}

\begin{bw_box}
\begin{definition}
\label{def:sm}
\textit{Ευθυγράμμιση σαρώσεων 2D lidar}

Έστω δύο δισδιάστατες μετρήσεις ενός αισθητήρα αποστάσεων τύπου lidar που
ικανοποιούν τον ορισμό \ref{def:lidar}, $\mathcal{S}_V$ και $\mathcal{S}_R$.
Έστω ότι οι μετρήσεις συνελήφθησαν στο ίδιο περιβάλλον και τις δύο χρονικές
στιγμές καταγραφής τους. Έστω $\bm{p}_V(x_V,y_V,\theta_V)$ η στάση από την
οποία ο αισθητήρας κατέγραψε την $\mathcal{S}_V$, εκπεφρασμένη σε κάποιο
σύστημα συντεταγμένων.  Στόχος της ευθυγράμμισης σαρώσεων σε δύο διαστάσεις
είναι να βρεθεί o τρισδιάστατος μετασχηματισμός $\bm{q} = (\bm{t}, \theta)$,
$\bm{t} = (\Delta x, \Delta y)$, που ελαχιστοποιεί την απόσταση των τελικών
σημείων της μετασχηματιζόμενης κατά $\bm{q}$ μέτρησης $\mathcal{S}_V$ από την
προβολή της στην $\mathcal{S}_R$.  Συμβολίζοντας τα τελικά σημεία του
$\mathcal{S}_V$ με $\{\bm{p}_V^i\}$:
\begin{align}
  \underset{\bm{q}}{\min} \sum\limits_i \Big\| \bm{p}_V^i \oplus \bm{q} - \prod \{ \mathcal{S}_R, \bm{p}_V^i \oplus \bm{q}^{-1} \}\Big\|^2
  \label{eq:sm_def}
\end{align}

Το σύμβολο ``$\oplus$" δηλώνει τον τελεστή μετασχηματισμού $\bm{p}_V^i \oplus
(\bm{t}, \theta) \triangleq \bm{R}(\theta) \bm{p}^i_V + \bm{t}$, όπου
$\bm{R}(\theta)$ είναι ο δισδιάστατος πίνακας περιστροφής με όρισμα
$\theta$, και $\prod\{\mathcal{S}_R, \bm{p}_V^i \oplus \bm{q} \}$ είναι η
ευκλείδεια προβολή στην $\mathcal{S}_R$.
\end{definition}
\end{bw_box}




\begin{gg_box}
\begin{remark}
\label{rem:sm_applications}
Η ευθυγράμμιση σαρώσεων χρησιμοποιείται στη ρομποτική ως μέσο οδομετρίας,
πρωτίστως σε μη τροχοφόρα οχήματα (τα οποία συνεπώς δεν έχουν τη δυνατότητα να
φέρουν κωδικοποιητές), ή ως ένας χρήσιμος βελτιωτικός συντελεστής της διαρκώς
αποκλίνουσας οδομετρίας με κωδικοποιητές: σαρώσεις που λαμβάνονται σε
διαδοχικές χρονικές στιγμές, εισαγόμενες σε αλγόριθμο ευθυγράμμισης
σαρώσεων, εξάγουν την εκτίμηση της στάσης του αισθητήρα σάρωσης κατά τη
δεύτερη χρονική στιγμή καταγραφής σε σχέση με την πρώτη. Αλγόριθμοι
ευθυγράμμισης σαρώσεων χρησιμοποιούνται με επιτυχία για την επίλυση του
προβλήματος της ταυτόχρονης χαρτογράφησης και εκτίμησης της στάσης οχήματος
\cite{Gutmann,Hahnel,Chieh-ChihWang}, κατασκευή τοπικών χαρτών
\cite{Lacroix2002a,Minguez,Montesano2008a}, και σε συστήματα παρακολούθησης της
τροχιάς ανθρώπων \cite{Schulz}.
\end{remark}
\end{gg_box}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Ευθυγράμμιση σαρώσεων lidar με σαρώσεις χάρτη}
\label{subsec:01_01_02_6}

Η τεχνική της ευθυγράμμισης μετρήσεων 2D lidar έχει αποκτήσει τα τελευταία
χρόνια και μία ακόμη εφαρμογή: τη χρήση της για την εκτίμηση της στάσης ενός
οχήματος εντός του χάρτη του περιβάλλοντος στο οποίο βρίσκεται. Η λογική εδώ
είναι ότι εάν αντικατασταθεί στη διαδικασία ευθυγράμμισης μετρήσεων lidar η μία
από τις δύο μετρήσεις (οι οποίες αναφέρονται και οι δύο στο περιβάλλον) με μία
σάρωση που αναφέρεται στο χάρτη του τότε η ευθυγράμμιση της σάρωσης του χάρτη
με τη σάρωση του περιβάλλοντος παρέχει το μετασχηματισμό που ελαχιστοποιεί το
σφάλμα εκτίμησης της στάσης του αισθητήρα στο σύστημα συντεταγμένων του χάρτη.
Συνεπώς η ευθυγράμμιση σαρώσεων lidar με σαρώσεις χάρτη μπορεί να
χρησιμοποιηθεί στα πλαίσια της λύσης προβλημάτων εκτίμησης της στάσης του
αισθητήρα, δηλαδή για την εκτίμησή της βάσει περιορισμένης αβεβαιότητος. Κατά
συνέπεια, σε αντίθεση με το πρόβλημα της ευθυγράμμισης σαρώσεων μετρήσεων
lidar, το οποίο δεν προϋποθέτει τη γνώση του χάρτη του περιβάλλοντος, στο
πρόβλημα της ευθυγράμμισης σαρώσεων lidar με σαρώσεις χάρτη η γνώση του
τελευταίου είναι αναγκαία συνθήκη.


\begin{bw_box}
\begin{definition}
\label{def:map_scan}
\textit{Ορισμός σάρωσης χάρτη}

Μια σάρωση χάρτη είναι μια εικονική σάρωση που ενσωματώνει τις ίδιες
πληροφορίες με μια σάρωση που προέρχεται από έναν φυσικό αισθητήρα. Μόνο η
υποκείμενη αρχή λειτουργίας τους είναι διαφορετική λόγω του γεγονότος ότι η
σάρωση χάρτη αναφέρεται σε αποστάσεις σε εμπόδια εντός του χάρτη του
περιβάλλοντος του ρομπότ και όχι εντός του το ίδιου του περιβάλλοντος---εξ ου
και η εικονικότητά της. Μία σάρωση χάρτη λαμβάνεται από έναν εικονικό
αισθητήρα και προκύπτει μέσω του εντοπισμού των τομών των ακτίνων που
προέρχονται από την εκτίμηση της στάσης του αισθητήρα και των ορίων των
εμποδίων του χάρτη.
\end{definition}
\end{bw_box}

\begin{bw_box}
\begin{definition}
\label{def:smsm}
\textit{Ευθυγράμμιση σαρώσεων 2D lidar με σαρώσεις χάρτη}

Η ευθυγράμμιση σαρώσεων 2D lidar με σαρώσεις χάρτη ορίζεται με τον ίδιο τρόπο
όπως η ευθυγράμμιση σαρώσεων 2D lidar (Ορισμός \ref{def:sm}) αλλά με το
$\mathcal{S}_V$ να προέρχεται όχι από το φυσικό περιβάλλον του ρομπότ αλλά
από το χάρτη του.
\end{definition}
\end{bw_box}


\begin{gg_box}
\begin{remark}
\label{remark:smsm_benefit}
Το όφελος της ευθυγράμμισης α) μιας σάρωσης χάρτη που προέρχεται από έναν
εικονικό αισθητήρα, από την εκτιμώμενη στάση του σε αυτόν με (β) μια σάρωση
που προέρχεται από έναν φυσικό αισθητήρα, από την πραγματική του στάση είναι
ότι η διόρθωση της εκτίμησης της στάσης του αισθητήρα παρέχει τη διόρθωση της
εκτίμησης της στάσης του ρομπότ: Έστω ότι η εκτίμηση της στάσης ενός ρομπότ
βρίσκεται στη γειτονιά της πραγματικής στάσης του. Αν υποτεθεί ότι ο
αισθητήρας απόστασης είναι σταθερά στην ίδια στάση σε σχέση με το ρομπότ τόσο
στο πραγματικό όσο και στο εικονικό περιβάλλον τότε ο μετασχηματισμός των
τελικών σημείων της εικονικής σάρωσης που ελαχιστοποιεί την απόσταση από την
προβολή τους στη φυσική σάρωση ισούται με το μετασχηματισμό που, όταν
εφαρμοστεί στην εκτιμώμενη στάση του ρομπότ ελαχιστοποιεί το σφάλμα της σε
σχέση με την πραγματική του στάση. Επομένως η εξαγωγή του σχετικού
μετασχηματισμού της εικονικής σάρωσης σε σχέση με την πραγματική σάρωση
μπορεί να χρησιμοποιηθεί ως διόρθωση της εκτίμησης της θέσης του ρομπότ εντός
του χάρτη. Η βαρύτητα της σημασίας αυτής της διόρθωσης έγκειται στο γεγονός
ότι η τελευταία μπορεί να χρησιμοποιηθεί για να να μειώσει το σφάλμα
εκτίμησης της θέσης του ρομπότ κατά την παρακολούθηση της στάσης του, ή για
να διευκολύνει την εύρεση της στάσης του υπό καθολική αβεβαιότητα.
\end{remark}
\end{gg_box}


Στο σχήμα \ref{fig:smsm_principle} απεικονίζεται η ευθυγράμμιση μίας μέτρησης
$\mathcal{S}_R$ με μία εικονική μέτρηση $\mathcal{S}_V$ μέσω του τελεστή
$\texttt{smsm}$ (\underline{s}can--to--\underline{m}ap-\underline{s}can
\underline{m}atching).


\begin{figure}[htbp]\centering
  \input{./figures/parts/01/chapters/01/sections/02/smsm.pdf_tex}
  \vspace{0.5cm}
  \caption{\small Η ευθυγράμμιση της δισδιάστατης εικονικής σάρωσης
           $\mathcal{S}_V(\hat{\bm{p}})$ με τη δισδιάστατη φυσική μέτρηση-σάρωση
           $\mathcal{S}_R(\bm{p})$
           (\underline{s}can--to--\underline{m}ap-\underline{s}can
           \underline{m}atching) μετασχηματίζει τη στάση $\hat{\bm{p}}$ σε
           $\hat{\bm{p}}^\prime \simeq \bm{p}$ και μειώνει το σφάλμα εκτίμησης
           από $\|\hat{\bm{p}}-\bm{p}\|$ σε : $\|\hat{\bm{p}}^\prime -
           \bm{p}\| < \|\hat{\bm{p}}- \bm{p}\|$. Τα κόκκινα σημεία υποδηλώνουν
           τη φυσική μέτρηση $\mathcal{S}_R(\bm{p})$, ενώ τα γκρι την εικονική
           μέτρηση $\mathcal{S}_V(\hat{\bm{p}})$.  Η μεταβολή της μορφής της
           εικονικής μέτρησης οφείλεται στο γεγονός ότι από διαφορετικές
           στάσεις εντός του χάρτη είναι ορατά διαφορετικά σημεία του: η
           εικονική μέτρηση προσομοιάζει όλο και περισσότερο τη φυσική μέτρηση
           όσο το σφάλμα εκτίμησης της στάσης μειώνεται}
  \label{fig:smsm_principle}
\end{figure}

\begin{gg_box}
\begin{remark}
\label{rem:iterative}
Η ευθυγράμμιση πραγματικών και εικονικών σαρώσεων είναι ένα εγγενώς συζευγμένο
πρόβλημα: δεδομένου του γεγονότος ότι η γεωμετρία των τελικών σημείων των
ακτίνων της εικονικής σάρωσης μπορεί να ευθυγραμμιστεί, χωρίς βλάβη της
γενικότητας, μόνο από την πραγματική στάση του ρομπότ, ο προσανατολισμός του
ρομπότ μπορεί να εξαχθεί εάν και μόνον εάν η εκτίμηση της θέσης του συμπίπτει
με την πραγματική του θέση, και η θέση του μπορεί να εξαχθεί μόνο εάν και
μόνον εάν η εκτίμηση προσανατολισμού του είναι ίση με τον πραγματικό του
προσανατολισμό. Ωστόσο, και τα δύο είναι, κατ' αρχήν, άνισα. Αυτή η σύζευξη
είναι ο λόγος για τον οποίο απαιτείται μια επαναληπτική μέθοδος όσο αφορά
στην λύση της ευθυγράμμισης πραγματικών και εικονικών σαρώσεων.
\end{remark}
\end{gg_box}

\begin{gg_box}
\begin{remark}
Σε αντίθεση με την ευθυγράμμιση μετρήσεων, όπου η $\mathcal{S}_V$ είναι μια
αμετάβλητη μέτρηση πιθανότατα επιφορτωμένη με αναπόφευκτα σφάλματα ως προς τη
σάρωση $\mathcal{S}_R$ (σφάλματα υπό την έννοια της ατελούς αλληλοεπικάλυψής
τους λόγω του γεγονότος ότι από διαφορετικές θέσεις σε ένα περιβάλλον
καθίστανται ορατές και αόρατες διαφορετικές περιοχές του), στην ευθυγράμμιση
πραγματικών μετρήσεων και εικονικών σαρώσεων η $\mathcal{S}_V$ παράγεται από
το χάρτη, ο οποίος αποτυπώνει τo περιβάλλον του ρομπότ στο σύνολό του,
μεταφέροντας έτσι αυτή την ιδιότητα σε κάθε εικονική σάρωση που υπολογίζεται
μέσω αυτού. Αυτή η λεπτή διαφορά καθιστά κατ' αρχήν δυνατή την ευθυγράμμιση
της εικονικής σάρωσης $\mathcal{S}_V$ με την αμετάβλητη μέτρηση $\mathcal{S}_R$
\begin{itemize}
  \item με μέγιστη ακρίβεια: η ανάκτηση της πραγματικής στάσης του ρομπότ
        μπορεί να γίνει με αυθαίρετη ακρίβεια (στην ιδανική περίπτωση τέλειων
        μετρήσεων και πλήρους σύμπτωσης χάρτη και περιβάλλοντος)
  \item πιθανώς χωρίς την ανάγκη να δημιουργηθούν αντιστοιχίσεις μεταξύ των
        ακτίνων των δύο σαρώσεων (καθώς η λειτουργία αυτή επινοήθηκε για- και
        κυρίως διευκολύνει την αντιστοίχιση συνόλων που κατ' αρχήν
        επικαλύπτονται σε ορισμένες περιοχές αλλά όχι σε άλλες, δηλαδή για το
        έργο της ευθυγράμμισης μετρήσεων). Aυτό αποτελεί ακόμα ισχυρισμό
        για τις περιπτώσεις όπου το γωνιακό εύρος όρασης $\lambda < 2\pi$, αλλά
        γεγονός όταν $\lambda = 2\pi$ όπως θα δούμε στα κεφάλαια
        \ref{part:02:chapter:03} και \ref{part:02:chapter:04}
\end{itemize}
\end{remark}
\end{gg_box}

\begin{gg_box}
\begin{remark}
Η σημασία της αποφυγής χρήσης αντιστοιχίσεων---εκτός από το γεγονός ότι δεν είναι
αυστηρά απαραίτητες για την ευθυγράμμιση πραγματικών μετρήσεων και εικονικών
σαρώσεων--- έγκειται στο γεγονός ότι η αποφυγή τους συμπαρασύρει και την
αποφυγή χρήσης των εξωτερικά καθορίσιμων παραμέτρων που διέπουν τη λειτουργία των
αλγορίθμων ευθυγράμμισης. Μέθοδοι ευθυγράμμισης που βασίζονται στην εφεύρεση
και χρήση αντιστοιχίσεων απαιτούν τη ρύθμιση των εν λόγω παραμέτρων, ο
προσδιορισμός ορισμένων από τις οποίες έχει αποδειχθεί ότι είναι μη
διαισθητικός, απαιτητικός, και όχι καθολικά αρμόζων σε οποιοδήποτε
περιβάλλον ή ακόμη και για διαφορετικές στάσεις στο ίδιο περιβάλλον.
\end{remark}
\end{gg_box}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Αναλλοίωτη ευθυγράμμιση Fourier-Mellin σε δύο διαστάσεις}
\label{subsec:01_01_02_7}

Σε αυτή την ενότητα αναφέρουμε πώς ο μετασχηματισμός Fourier-Mellin μπορεί να
χρησιμοποιηθεί για την ευθυγράμμιση δύο δισδιάστατων πλεγμάτων, τα οποία στο
εξής θα αναφέρονται επίσης ως ``εικόνες", οι οποίες σχετίζονται μεταξύ τους
μόνο με affine μετασχηματισμούς, δηλαδή μέσω μετατόπισης, περιστροφής ή/και
κλιμάκωσης.  \cite{Casasent1976,Qin-ShengChen1994a,Reddy1996}.

Έστω δύο εικόνες σταθερού μεγέθους, $\bm{r}(x,y)$, $\bm{s}(x,y)$, όπου η
δεύτερη είναι ένα μετατοπισμένο, περιστραμμένο, και κλιμακωμένο αντίγραφο της
πρώτης:
\begin{align}
  \bm{s}(x,y) = \bm{r}\big( &\sigma(x \cos\xi + y \sin\xi) - x_0, \sigma(-x \sin\xi + y \cos\xi) -y_0 \big) \nonumber
\end{align}
Εδώ $x_0,y_0$ είναι οι μετατοπίσεις κατά τους δύο άξονες $x$, $y$, $\xi$ η
γωνία περιστροφής, και $\sigma$ ο συντελεστής κλίμακας. Έστω ότι ο
μετασχηματισμός Fourier μιας συνάρτησης $h$ συμβολίζεται με $\mathcal{H} =
\mathcal{F}\{h\}$, ότι ο αντίστροφος μετασχηματισμός Fourier της $\mathcal{H}$
με $h = \mathcal{F}^{-1}\{\mathcal{H}\}$, και ότι $|\mathcal{H}|$ συμβολίζει το
μέτρο του $\mathcal{H}$. Τότε ο μετασχηματισμοί Fourier των $\bm{s}$, $\bm{r}$
συνδέονται με τις σχέσεις
\begin{align}
  \mathcal{S}(u,v) = e^{-i \phi_{\bm{s}}(u,v)} \sigma^{-2} \big| \mathcal{R} \big( \sigma^{-1}(u \cos\xi + v \sin\xi), \sigma^{-1}(-u \sin\xi + v \cos\xi) \big) \big| \nonumber
\end{align}
όπου $i^2 = -1$, και $\phi_{\bm{s}}$ είναι η φασματική φάση του $\bm{s}$.
Η φάση $\phi_{\bm{s}}$ εξαρτάται από τη μετατόπιση, την περιστροφή, και την
κλίμακα του $\bm{s}$ σε σχέση με το $\bm{r}$, αλλά το φασματικό μέτρο
$|\mathcal{S}(u,v)|$:
\begin{align}
  \big| \mathcal{S}(u,v) \big| &= \big| e^{-i \phi_{\bm{s}}(u,v)} \sigma^{-2} \mathcal{R} \big( \sigma^{-1}(u \cos\xi + v \sin\xi),
                                                                        \sigma^{-1}(-u \sin\xi + v \cos\xi) \big) \big| \nonumber \\
  &= \big| \mathcal{R} \big( \sigma^{-1}(u \cos\xi + v \sin\xi), \sigma^{-1}(-u \sin\xi + v \cos\xi) \big) \big| \label{eq:spectral_magnitude1}
\end{align}
είναι αναλλοίωτο της μετατόπισης. Η εξίσωση (\ref{eq:spectral_magnitude1})
δείχνει ότι περιστροφή της $\bm{r}$ περιστρέφει το φασματικό μέγεθος της
$\bm{s}$ κατά την ίδια γωνία, και ότι κλιμάκωση της $\bm{r}$ κλιμακώνει το
φασματικό μέγεθος της $\bm{s}$ κατά το αντίστροφο του συντελεστή κλίμακας. Τώρα
που η μετατόπιση έχει απεμπλακεί από τις άλλες δύο γραμμικές πράξεις, η
περιστροφή και η κλιμάκωση μπορούν να απεμπλακούν περαιτέρω με τον ορισμό των
φασματικών μεγεθών των $\bm{r}$ και $\bm{s}$ σε πολικές συντεταγμένες:
\begin{align}
  \bm{r}_p(\theta,\rho) &\triangleq |\mathcal{R} (\rho\cos\theta, \rho\sin\theta)| \nonumber \\
  \bm{s}_p(\theta,\rho) &\triangleq |\mathcal{S} (\rho\cos\theta, \rho\sin\theta)| \nonumber
\end{align}
Χρησιμοποιώντας
\begin{align}
  \sigma^{-1} (u\cos\xi+ v\sin\xi) = \dfrac{\rho}{\sigma} \cos(\theta - \xi) \nonumber \\
  \sigma^{-1} (-u\sin\xi+ v\cos\xi) = \dfrac{\rho}{\sigma} \sin(\theta - \xi) \nonumber
\end{align}
προκύπτει ότι
\begin{align}
  \bm{s}_p(\theta,\rho) = \sigma^{-2} \bm{r}_p (\theta-\xi, \rho/\sigma) \nonumber
\end{align}

Με τη μετατροπή σε πολικές συντεταγμένες η περιστροφή της $\bm{s}$ ως προς
$\bm{r}$ έχει μετατραπεί σε μετατόπιση της $\bm{s}_p$ ως προς
$\bm{r}_p$ κατά μήκος του γωνιακού άξονα. Ωστόσο η κλιμάκωση στο αρχικό πεδίο
δεν έχει μετασχηματιστεί: χρησιμοποιώντας όμως μια λογαριθμική κλίμακα για τον
ακτινικό άξονα η κλιμάκωση μπορεί επίσης να αναχθεί σε μετατόπιση. Έστω
$\lambda = \log\rho$ και $\kappa = \log\sigma$. Τότε ορίζοντας
\begin{align}
  \bm{r}_{pl}(\theta, \lambda) &\triangleq \bm{r}_p(\theta,\rho) \label{eq:rpl} \\
  \bm{s}_{pl}(\theta, \lambda) &\triangleq \bm{s}_p(\theta,\rho) = \sigma^{-2} \bm{r}_{pl} (\theta-\xi, \lambda - \kappa) \label{eq:spl}
\end{align}
η περιστροφή και η κλιμάκωση ανάγονται σε μετατοπίσεις κατά τον γωνιακό και
ακτινικό άξονα αντίστοιχα. Με μετασχηματισμό Fourier των εξισώσεων (\ref{eq:rpl})
και (\ref{eq:spl}) προκύπτει ότι:
\begin{align}
  \mathcal{S}_{pl}(\alpha,\beta) = \sigma^{-2} e^{-2 \pi i(\alpha\kappa + \beta\xi)} \mathcal{R}_{pl}(\alpha,\beta) \nonumber
\end{align}
Εδώ η γωνία περιστροφής $\xi$ και ο συντελεστής κλίμακας $\sigma = e^{\kappa}$
εμφανίζονται ως μετατοπίσεις φάσης. Η τεχνική που περιγράφηκε παραπάνω
απεμπλέκει τη μετατόπιση, την περιστροφή, και την κλιμάκωση των δύο εικόνων
ανάμεσά τους και επομένως είναι αποτελεσματική, αριθμητικά εφικτή, και
αποδοτική.

Η τεχνική Symmetric Phase-Only Matched Filtering \cite{Qin-ShengChen1994a} έχει
βρεθεί ότι είναι αποτελεσματική στην ευθυγράμμιση δύο \textit{όμοιων} (όχι
απαραίτητα πανομοιότυπων) εικόνων, λόγω της ικανότητάς της να αποδίδει υψηλά
επίπεδα λόγου σήματος προς θόρυβο (Signal-to-Noise ratio---SNR) και ευκρινείς
κορυφές συσχετίσεων. Η βασική διαδικασία υπολογισμού της γωνίας περιστροφής και
της κλίμακας της εικόνας $\bm{s}$ σε σχέση με $\bm{r}$ συνοψίζεται σε
ψευδοκώδικα στον Αλγόριθμο \ref{alg:spomf}.

\begin{algorithm}
  \caption{core \texttt{FMI-SPOMF}}
  \label{alg:spomf}
  \begin{spacing}{1.2}
  \begin{algorithmic}[1]
    \REQUIRE 2D grids / Images $\bm{r}$, $\bm{s}$
    \ENSURE $Q_0(\alpha,\beta)$
    \STATE compute $\mathcal{R}_{pl}(\alpha,\beta) = \mathcal{F}\{\bm{r}_{pl}(\theta,\lambda)\}$
    \STATE extract phase $e^{-i\phi_{\bm{r}}(\alpha, \beta)}$
    \STATE compute $\mathcal{S}_{pl}(\alpha,\beta) = \mathcal{F}\{\bm{s}_{pl}(\theta,\lambda)\}$
    \STATE extract phase $e^{-i\phi_{\bm{s}}(\alpha, \beta)}$
    \STATE determine $Q_0(\alpha, \beta) = e^{-i(\phi_{\bm{s}}(\alpha, \beta)-\phi_{\bm{r}}(\alpha, \beta))}$ \label{alg:spomf:Q0}
    \RETURN $Q_0(\alpha,\beta)$
  \end{algorithmic}
  \end{spacing}
\end{algorithm}
Μετά τον υπολογισμό του $Q_0$ (γραμμή \ref{alg:spomf:Q0}) η γωνία περιστροφής
$\xi$ και ο συντελεστής κλίμακας $\sigma$ μπορούν να εξαχθούν με τον υπολογισμό
του αντίστροφου μετασχηματισμού Fourier του $Q_0$, $q_0 =
\mathcal{F}^{-1}(Q_0)$, και τον υπολογισμό των ορισμάτων που τον μεγιστοποιούν.

\begin{gg_box}
  \begin{remark}
    \label{remark:01_01_02:q0_similarity_measure}
    Υπό αυτή την έννοια, η ποσότητα $\max q_0$ μπορεί να ερμηνευτεί ως ένα μέτρο
    ομοιότητας των δύο εικόνων εισόδου.
  \end{remark}
\end{gg_box}

Στα προβλήματα ευθυγράμμισης εικόνων οι δύο εικόνες εισόδου θεωρούνται ότι
είναι πανομοιότυπες, και στόχος είναι να προσδιοριστούν και οι τέσσερις
παράμετροι του γεωμετρικού μετασχηματισμού που συνδέουν τη μία με την άλλη. Η
διαδικασία που ακολουθείται για εξαγωγή τους συνοψίζεται σε ψευδοκώδικα
στον Αλγόριθμο \ref{alg:image_registration}.

\begin{algorithm}
  \renewcommand{\arraystretch}{1.3}
  \caption{\texttt{FMI-SPOMF} for image registration}
  \label{alg:image_registration}
  \begin{spacing}{1.2}
  \begin{algorithmic}[1]
    \REQUIRE 2D grids / Images $\bm{r}$, $\bm{s}$
    \ENSURE Translation $(x_0,y_0)$, rotation angle $\xi$, scale $\sigma$, similarity measure $w$
    \STATE $Q_0(\alpha,\beta) \leftarrow$ execute Algorithm \ref{alg:spomf} for input ($\bm{r}$, $\bm{s}$)
    \STATE $q_0(\theta,\lambda) = \mathcal{F}^{-1}\{Q_0(\alpha, \beta)\}$
    \STATE $(\xi, \kappa) \leftarrow \arg\max\limits_{\theta,\lambda}{q_0(\theta, \lambda)}$
    \STATE $\bm{s} \leftarrow$ Rescale $\bm{s}$ by $\sigma^{-1} = e^{-\kappa}$
    \STATE $\bm{s}^{\prime} \leftarrow \bm{s}$
    \STATE $\bm{s} \leftarrow$          rotate $\bm{s}$ by $\xi$
    \STATE $\bm{s}^{\prime} \leftarrow$ rotate $\bm{s}^{\prime}$ by $\xi + \pi$
    \STATE $Q_1(\alpha,\beta) \leftarrow$ execute Algorithm \ref{alg:spomf} for input ($\bm{r}$, $\bm{s}$)
    \STATE $Q_2(\alpha,\beta) \leftarrow$ execute Algorithm \ref{alg:spomf} for input ($\bm{r}$, $\bm{s}^{\prime}$)
    \STATE $q_1(\theta,\lambda) \leftarrow \mathcal{F}^{-1}\{Q_1(\alpha, \beta)\}$
    \STATE $q_2(\theta,\lambda) \leftarrow \mathcal{F}^{-1}\{Q_2(\alpha, \beta)\}$
    \STATE $q(\theta,\lambda) \leftarrow \arg\max\limits_{q_1,q_2}\{q_1, q_2\}$
    \STATE Determine similarity measure $w = \max q$
    \STATE $(x_0,y_0) \leftarrow \arg\max\limits_{\theta,\lambda}{q}$
    \RETURN $\{(x_0,y_0), \xi, \sigma, w\}$
  \end{algorithmic}
  \end{spacing}
\end{algorithm}

Στα προβλήματα αναγνώρισης προτύπων, από την άλλη πλευρά, όπου ο στόχος είναι
να εντοπιστούν μεταξύ ενός συνόλου εικόνων αναφοράς εκείνη που ταιριάζει
καλύτερα με μια παρατηρούμενη εικόνα, μπορεί κανείς δυνητικά να βεβαιώσει την
ύπαρξη αυτής της εικόνας εκτελώντας τον Αλγόριθμο \ref{alg:spomf} ανάμεσα σε
όλες τις εικόνες αναφοράς και την εικόνα εισόδου, να προσδιορίσει το μέγιστο
κάθε εξόδου $q_0$, και να τοποθετήσει ένα κατώφλι σε αυτό: εάν το υπερβαίνει
τότε πρόκειται για ταύτιση. Τα ψευδώς θετικά αποτελέσματα μπορούν στη συνέχεια
να φιλτραριστούν εκτελώντας τον Αλγόριθμο \ref{alg:image_registration},
συγκρίνοντας την παρατηρούμενη εικόνα με κάθε εικόνα αναφοράς μετά από
μετατόπιση, περιστροφή, και κλιμάκωση κατά τις προσδιορισμένες παραμέτρους, και
εφαρμόζοντας ένα δεύτερο κατώφλι στο μέγιστο του $q_0$.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Κεντροειδές πολυγώνου}
\label{subsec:01_01_02_8}

Το θεώρημα του Green \cite{Riemann1851} δηλώνει ότι για μια ομαλή καμπύλη $C$
που αποτελεί το όριο μιας περιοχής $D$:
\begin{align}
  \oint_C P(x,y) \,dx + Q(x,y) \,dy = \iint_D \frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y} \,dA
  \label{eq:green}
\end{align}
όπου $A = \iint_D dA$ είναι το εμβαδόν του $D$. Το εμβαδόν $A$ μπορεί να να
υπολογιστεί επιλέγοντας κατάλληλα $P,Q$ έτσι ώστε
$\frac{\partial Q}{\partial x} - \frac{\partial P}{\partial y} = 1$. Έστω
$P=0$ και $Q=x$, τότε $\oint_C x \,dy = \iint_D \,dA = A$. Έστω το πολύγωνο του
σχήματος \ref{fig:polygon}, το οποίο ορίζεται από τη διατεταγμένη ακολουθία
$n$ κορυφών $\{C_0, C_1, \dots, C_{n-1}\}$, του οποίου η περιοχή οριοθετείται
από το όριο $C = (C_0 C_1) \cup (C_1 C_2) \cup \dots \cup (C_{n-1} C_0)$.
Επειδή τα επικαμπύλια ολοκληρώματα πάνω σε ομαλές καμπύλες είναι προσθετικά σε
μήκος:
\begin{align}
  A = \oint_C x \,dy = \int_{C_0 C_1} x \,dy + \dots + \int_{C_{n-1} C_0} x \,dy
  \label{eq:A_broken_ints}
\end{align}

Για να υπολογίσουμε το $k$-οστό ολοκλήρωμα $C_k C_{k+1}$, έστω ότι το
ευθύγραμμο τμήμα από $(x_k,y_k)$ έως $(x_{k+1}, y_{k+1})$ παραμετροποιείται από
την ακόλουθη σχέση:
\begin{align}
  C_k C_{k+1} : \vec{r} = \big( (x_{k+1}-x_k)t + x_k, (y_{k+1}-y_k)t + y_k \big)
\end{align}
όπου $t \in \mathbb{R}: 0 \leq t\leq 1$, $k \in \mathbb{Z}: 0 \leq k \leq n-1$,
και $k+1 = 0$ εάν $k=n-1$. Ένα ολοκλήρωμα του δεξιού σκέλους της εξίσωσης
(\ref{eq:A_broken_ints}) επί του $C_k C_{k+1}$ εκφράζεται ως
\begin{align}
  \int_{C_k C_{k+1}} x \,dy = \int\limits_0^1 \big( (x_{k+1}-x_k)t + x_k \big) (y_{k+1}-y_k) \,dt
  \label{eq:A_one_int}
\end{align}
Θέτοντας αυτή την παραμετροποίηση στην εξίσωση (\ref{eq:A_broken_ints}) και
αθροίζοντας για όλες τις γραμμές καταλήγουμε ότι:
\begin{align}
  A = \frac{1}{2}\sum\limits_{k=0}^{n-1} (x_{k+1} + x_k) (y_{k+1} - y_k)
\label{eq:polygon_area}
\end{align}
όπου $(x_n,y_n) \equiv (x_0, y_0)$.

\begin{figure}\centering
  \tikzset{ext/.pic={
  \path [fill=white] (-0.2,0)to[bend left](0,0.1)to[bend right](0.2,0.2)to(0.2,0)to[bend left](0,-0.1)to[bend right](-0.2,-0.2)--cycle;
  \draw (-0.2,0)to[bend left](0,0.1)to[bend right](0.2,0.2) (0.2,0)to[bend left](0,-0.1)to[bend right](-0.2,-0.2);
  }}
  \begin{tikzpicture}
      \coordinate (7) at (3.7,0.2);
      \coordinate (6) at (2.4,1.75);
      \coordinate (5) at (1,2);
      \coordinate (4) at (4, 1.5);
      \coordinate (3) at (5,0);
      \coordinate (2) at (3.5, -0.8);
      \coordinate (1) at (1.5,1);
      \path[draw] (0,0) node[left] {$C_0$}
      -- (1) node[below] {$C_1$}
      -- (2) node[below] {$C_2$}
      -- (3) node[right] {$C_3$}
      -- (4) node[above] {$C_4$};
      \path[draw, dotted] (4) -- (5) node[above] {$C_{n-1}$};
      \path[draw] (6) pic[rotate=40]{ext} node[above] {};
      \path[draw] (5) -- (0,0);
      \path (7) -- (7) node {$D$};
  \end{tikzpicture}
  \caption{\small Ένα πολύγωνο $n$ κορυφών του οποίου το όριο
           $C = C_0C_1 \cup C_1 C_2 \cup \dots \cup C_{n-1} C_0$ οριοθετεί την
           περιοχή $D$}
  \label{fig:polygon}
\end{figure}

Ο υπολογισμός του εμβαδού του πολυγώνου επιτρέπει την εύρεση του κέντρου μάζας
του, δηλαδή του κεντροειδούς του. Το κεντροειδές $(x_c,y_c)$ ενός πολυγώνου
δίνεται από τη σχέση:
\begin{align}
  (x_c, y_c) &\equiv (\frac{1}{A} \iint_A x \,dx \,dy, \frac{1}{A} \iint_A y \,dx \,dy)
\end{align}

Για να υπολογίσουμε το $x_c$, έστω $P = 0$ και $Q = \dfrac{1}{2}x^2$. Tότε από
την εξίσωση (\ref{eq:green}):
\begin{align}
  x_c = \frac{1}{A} \iint_A x \,dx \,dy = \frac{1}{A}\oint_C \frac{1}{2} x^2 \,dy
\end{align}
Χρησιμοποιώντας την ίδια παραμετροποίηση για κάθε όριο $C_k C_{k+1}$ όπως στην εξίσωση
(\ref{eq:A_one_int}):
\begin{align}
  x_c &= \frac{1}{2A} \int\limits_0^1 \big( x_k^2 + 2x_k (x_{k+1} - x_k)t + (x_{k+1} - x_k)^2 t^2 \big) (y_{k+1}- y_k) \,dt \nonumber \\
      &= \frac{1}{6}(x_{k+1}^2 + x_{k+1} x_k + x_k^2)(y_{k+1} - y_k) \nonumber
\end{align}
Επομένως, για ένα πολύγωνο με πεπερασμένο αριθμό κορυφών:
\begin{align}
  x_c &= \frac{1}{6A} \sum\limits_{k=0}^{n-1} (x_{k+1}^2 + x_{k+1} x_k + x_k^2)(y_{k+1} - y_k) \nonumber \\
      & = \frac{1}{6A} \sum\limits_{k=0}^{n-1} (-y_k x_{k+1}^2 + y_{k+1} x_{k+1} x_{k+1} x_k - y_k x_{k+1} x_k + y_{k+1} x_k^2) \nonumber \\
      &= \frac{1}{6A} \sum\limits_{k=0}^{n-1} (x_{k+1} + x_k) (x_k y_{k+1} - x_{k+1} y_k)
\label{eq:centroid_x}
\end{align}
Με τον ίδιο τρόπο καταλήγουμε ότι:
\begin{align}
  y_c &= \frac{1}{6A} \sum\limits_{k=0}^{n-1} (y_{k+1} + y_k) (x_k y_{k+1} - x_{k+1} y_k)
\label{eq:centroid_y}
\end{align}
όπου και στις δύο εξισώσεις (\ref{eq:centroid_x}), (\ref{eq:centroid_y}) η
συντεταγμένες του $n$-οστού σημείου είναι αυτές του $0$-οστού, και το εμβαδόν
$A$ δίνεται από την εξίσωση (\ref{eq:polygon_area}).

\begin{gg_box}
\begin{remark}
  \label{remark:centroid_uniqueness}
  Το κεντροειδές ενός πολυγώνου είναι μοναδικό. Η θέση του σε σχέση με τα
  σημεία που αποτελούν το πολύγωνο είναι ανεξάρτητη από το σύστημα αναφοράς στο
  οποίο εκφράζονται όλα τα σημεία (συμπεριλαμβανομένου του κεντροειδούς).
\end{remark}
\end{gg_box}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Το λειτουργικό σύστημα ρομπότ \texttt{ROS}}
\label{subsec:01_01_02_9}

Το \texttt{ROS} είναι ένα μετα-λειτουργικό σύστημα ανοικτού κώδικα για την
εκτέλεση εφαρμογών που αφορούν στη ρομποτική από το υπολογιστικό σύστημα που
φέρει ένα ρομπότ \cite{Ng2009}. Παρέχει αφαίρεση υλικού (hardware abstraction),
έλεγχο συσκευών χαμηλού επιπέδου, υλοποίηση συχνά χρησιμοποιούμενων
λειτουργιών, διακίνηση μηνυμάτων μεταξύ διεργασιών, και διαχείριση πακέτων.
Παρέχει επίσης εργαλεία και βιβλιοθήκες για την απόκτηση, την κατασκευή, τη
συγγραφή, και την εκτέλεση κώδικα. Ο ``γράφος" του \texttt{ROS} σε χρόνο
εκτέλεσης είναι ένα δίκτυο peer-to-peer διεργασιών που συνδέονται
χρησιμοποιώντας την υποδομή επικοινωνίας του \texttt{ROS}.

Ένα από τα κύρια πλεονεκτήματα του \texttt{ROS} είναι η τυποποίηση των τύπων
μηνυμάτων επικοινωνίας, χρησιμοποιώντας μια απλή γλωσσικά ουδέτερη IDL
(Interface Definition Language) για την περιγραφή τους, με αποτέλεσμα την
ικανότητα υλοποίησης λογισμικού χωρίς γλωσσικές ιδιαιτερότητες. Αυτή η
τυποποίηση επιτρέπει την ανάπτυξη αποσυνδεδεμένων πακέτων \texttt{ROS}, δηλαδή
εύκολα επαναχρησιμοποιήσιμων συλλογών \textit{κόμβων}. Ένας κόμβος είναι μια
υπολογιστική διεργασία που εκτελεί υπολογισμούς που προσφέρουν συγκεκριμένη
λειτουργικότητα. Οι κόμβοι συνδυάζονται μαζί σε έναν γράφο και επικοινωνούν
μεταξύ τους ασύγχρονα, χρησιμοποιώντας θέματα (topics), ή/και σύγχρονα, μέσω
υπηρεσιών κλήσης απομακρυσμένων
διαδικασιών.\footnote{\url{http://wiki.ros.org/Nodes}} Στο \texttt{ROS} ένα
ρομποτικό σύστημα αποτελείται συνήθως από πολλούς κόμβους. Οι απαιτήσεις του
υλικού του \texttt{ROS} είναι ελάχιστες σε επεξεργαστική ισχύ και μνήμη,
καθιστώντας το ικανό να εκτελεστεί σε ένα Raspberry Pi ή ένα BeagleBone, ωστόσο
οι πραγματικές απαιτήσεις του ποικίλουν ανάλογα με τον αριθμό και τον τύπο των
κόμβων που έχει αναλάβει να εκτελέσει ένα ρομπότ.

Για τους σκοπούς της διατριβής το \texttt{ROS} χρησιμοποιείται σε συνδυασμό με
πραγματικά ή προσομοιωμένα περιβάλλοντα, αισθητήρες, και ρομπότ, για την
εμβάθυνση της έρευνας στο πεδίο εφαρμογής \ref{scope}, και για την διεξαγωγή
πειραμάτων και προσομοιώσεων με βάση προτεινόμενες μεθόδους και μεθόδους της
βιβλιογραφίας.
