Στην παρούσα ενότητα δοκιμάζεται η επίδοση της μεθόδου FSMSM στο έργο της
ευθυγράμμισης πραγματικών με εικονικές σαρώσεις. Ταυτόχρονα η επίδοσή της
δοκιμάζεται έναντι αυτής των πιο διαδεδομένων αλγορίθμων ευθυγράμμισης σαρώσεων
της βιβλιογραφίας, οι οποίοι δύνανται να χρησιμοποιηθούν για την επίλυση του
ίδιου προβλήματος. Σημειώνουμε ότι στο σύνολό τους οι τελευταίες λειτουργούν
υπολογίζοντας αντιστοιχίσεις ανάμεσα στις ακτίνες των σαρώσεων εισόδου, ενώ η
FSMSM ??

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Πειραματική διάταξη}
\label{subsection:02_04_05:01}

Η πειραματική διαδικασία διεξάγεται με τη χρήση πέντε καθιερωμένων και
διαθέσιμων συνόλων δεδομένων αναφοράς που παραχωρούνται από το Τμήμα Επιστήμης
της Πληροφορικής του πανεπιστημίου του Freiburg.\footnote{Τα σύνολα δεδομένων
είναι διαθέσιμα στη διεύθυνση
\url{http://ais.informatik.uni-freiburg.de/slamevaluation/datasets.php}} Κάθε
σύνολο δεδομένων αποτελείται από μία συλλογή δισδιάστατων μετρήσεων
αποστάσεων από έναν αισθητήρα αποστάσεων lidar και τη στάση
$\bm{r}(x,y,\theta)$ από την οποία πραγματοποιήθηκε η κάθε μία. Οι μετρήσεις
του κάθε συνόλου δεδομένων παρήχθησαν από αισθητήρες διαφορετικού μέγιστου
εύρους και αριθμού ακτίνων. Η ονομασία και το μέγεθος κάθε συνόλου δεδομένων
που χρησιμοποιείται για την πειραματική διαδικασία παρουσιάζεται στον πίνακα
\ref{tbl:02:04_05:dataset_sizes}.

\begin{table}\centering
  \begin{tabular}{lc}
  Σύνολο δεδομένων      & Πληθικότητα  \\  \toprule
  \texttt{aces}         & $7373$       \\
  \texttt{fr079}        & $4933$       \\
  \texttt{intel}        & $13630$      \\
  \texttt{mit\_csail}   & $1987$       \\
  \texttt{mit\_killian} & $17479$      \\  \bottomrule
  \end{tabular}
\caption{\small Η ονομασία και το μέγεθος κάθε συνόλου δεδομένων που
         χρησιμοποιήθηκε για την αξιολόγηση των επιδόσεων αλγορίθμων της
         βιβλιογραφίας και της παρούσας διατριβής στην επίλυση του προβλήματος
         της ευθυγράμμισης πραγματικών με εικονικές σαρώσεις χάρτη}
  \label{tbl:02:04_05:dataset_sizes}
\end{table}

Η πειραματική διάταξη είναι η ακόλουθη. Οι ακτίνες κάθε δείγματος του συνόλου
δεδομένων $D_k^d$, $k \in \{0,1,\dots,4\}$, $d \in \{0,1,\dots,|D_k|\}$ πρώτα
προβάλλονται στο επίπεδο $x-y$ γύρω από τη στάση $\bm{r}_k^d$. Οι σαρώσεις των
συνόλων δεδομένων δεν είναι πανοραμικές, επομένως ο υπόλοιπος γωνιακός χώρος
συμπληρώνεται με ένα ημικυκλικό τόξο που ενώνει τις δύο ακραίες ακτίνες της
κάθε σάρωσης. Η ακτίνα του ημικυκλίου ορίζεται ως η ελάχιστη των δύο ακραίων
ακτίνων του $D_k^d$. Διαφορετικοί τρόποι για το κλείσιμο του περιβάλλοντος
(π.χ.  μέσω καθρεφτισμού των μετρήσεων κατά $x$ ή $y$, ή ένωσης των δύο ακραίων
ακτίνων μέσω ευθύγραμμου τμήματος) έχουν βρεθεί ισοδύναμοι όσον αφορά στην
επίδοση των υπό δοκιμής μεθόδων. Το σύνολο σημείων που προκύπτει θεωρείται ως ο
περιβάλλον χώρος $\bm{W}_k^d$ του αισθητήρα αποστάσεων (π.χ.  το περιβάλλον του
σχήματος \ref{fig:02_02:the_problem}). Τότε ο χάρτης $\bm{M}_k^d$ του
περιβάλλοντος $\bm{W}_k^d$ τίθεται ως $\bm{M}_k^d \equiv \bm{W}_k^d$.
Προκειμένου να προκληθούν παραμορφώσεις στο χάρτη κάθε συντεταγμένη όλων των
σημείων του $\bm{M}_k^d$ διαταράσσεται από σφάλματα που εξάγονται από την
κανονική κατανομή $\mathcal{N}_{\bm{M}} \sim (0, \sigma_{\bm{M}}^2)$.  Η
πραγματική στάση του αισθητήρα $\bm{p}_k^d$ παράγεται τυχαία εντός του
πολυγώνου που σχηματίζεται από το σύνολο σημείων $\bm{W}_k^d$.  Η σάρωση που
θεωρείται στο εξής και αναφέρεται ως πραγματική, $\mathcal{S}_{R,k}^d$, η οποία
θεωρείται ότι αναφέρεται από τον φυσικό αισθητήρα, υπολογίζεται μέσω δεσμοβολής
$N_s$ ακτίνων από τη στάση $\bm{p}_k^d$ προς τις ακμές του πολυγώνου που
σχηματίζεται από τα σημεία του συνόλου $\bm{W}_k^d$, σε ένα γωνιακό πεδίο
όρασης $\lambda = 2\pi$. Η αρχική εκτίμηση της στάσης του αισθητήρα
$\hat{\bm{p}}_k^d$ λαμβάνεται μέσω διαταραχής των συνιστωσών της πραγματικής
στάσης $\bm{p}^d_k$ με ποσότητες που εξάγονται από ομοιόμορφα κατανεμημένες
κατανομές σφαλμάτων $U_{xy}(-\overline{\delta}_{xy}, \overline{\delta}_{xy})$,
$U_{\theta}(-\overline{\delta}_{\theta}, \overline{\delta}_{\theta})$:
$\overline{\delta}_{xy}$, $\overline{\delta}_\theta$ $\in \mathbb{R}_{\geq 0}$.

Προκειμένου να ελεγχθεί η επίδοση των αλγορίθμων σε πραγματικές συνθήκες
δοκιμάζονται πέντε επίπεδα θορύβου με επίδραση στις μετρήσεις της πραγματικής
σάρωσης $\mathcal{S}_{R,k}^d$: κάθε μέτρηση διαταράσσεται από θόρυβο
$\mathcal{N}_{R} \sim (0, \sigma_{R}^2)$: $\sigma_R \in \{0.01, 0.03, 0.05,
0.10, 0.20\}$ m. Οι τιμές των τυπικών αποκλίσεων υπολογίστηκαν από εμπορικά
διαθέσιμους πανοραμικούς αισθητήρες lidar, προσδιορίζοντας το μέγεθος της
μέγιστης αναφερόμενης τιμής των σφαλμάτων απόστασης και διαιρώντας το με τον
συντελεστή τρία. Το σκεπτικό είναι ότι $99.73\%$ των σφαλμάτων εντοπίζονται
εντός $3\sigma$ γύρω από την πραγματική απόσταση μεταξύ μιας ακτίνας και ενός
εμποδίου, υποθέτοντας ότι τα σφάλματα κατανέμονται κανονικά. Η ελάχιστη τιμή
$\sigma_R = 0.01$ m αναφέρεται για ακριβείς πανοραμικούς αισθητήρες μεγάλου
κόστους VELODYNE \cite{velodyne_datasheet}, και οι υπόλοιπες για πανοραμικους
αισθητήρες με ελκυστική τιμή, αλλά αυξημένα επίπεδα διαταραχών, π.χ. RPLIDAR
A2M8, YDLIDAR G4, G6, TG30 και X4.  \cite{a2m8_datasheet,ydlidar}. Επιπλέον,
δύο επίπεδα διαφθοράς χάρτη δοκιμάζονται: $\sigma_{\bm{M}} \in \{0.0, 0.05\}$
m.  Οι μέγιστες κατά θέση και προσανατολισμό μετατοπίσεις
$\overline{\delta}_{xy}$ και $\overline{\delta}_{\theta}$ ορίζονται σε
$\overline{\delta}_{xy} = 0.20$ m και $\overline{\delta}_\theta = \pi / 4$ rad.
Η τιμή του $\overline{\delta}_{xy}$ επιλέχθηκε ως τέτοια από αναφορές σφαλμάτων
θέσης σε πραγματικές συνθήκες \cite{Peng2018a}. Η τιμή του
$\overline{\delta}_\theta$ επιλέχθηκε ως τέτοια προκειμένου να συμπεριληφθούν
σφάλματα προσανατολισμού στο στάδιο αρχικοποίησης της παρακολούθησης στάσης,
και σφάλματα που προκαλούνται λόγω αποκλινουσών ενδείξεων οδομετρίας. Το
μέγεθος της πραγματικής σάρωσης εισόδου ορίστηκε σε $N_s=360$ ακτίνες.

Διακρίνουμε τον FSMSM σε τρεις υλοποιήσεις, ανάλογα με τη μέθοδο που
χρησιμοποιείται για την εκτίμηση του προσανατολισμού της στάσης του φυσικού
αισθητήρα. Σε ό,τι ακολουθεί σημειώνουμε τον FSMSM με τη χρήση της μεθόδου (α)
Πρώτων Αρχών ως \texttt{x1}, (β) Προκρούστη ως \texttt{uf}, και (γ)
Fourier-Mellin μίας διάστασης ως \texttt{fm}. Ο ελάχιστος και ο μέγιστος ρυθμός
υπερδειγματοληψίας του χάρτη για τις μεθόδους \texttt{fm} και \texttt{uf}
ορίστηκαν σε $(\mu_{\min},\mu_{\max}) = (2^{\nu_{\min}},2^{\nu_{\max}}) =
(2^2,2^5)$, ενώ για τη μέθοδο \texttt{x1}: $(\mu_{\min},\mu_{\max}) =
(2^{\nu_{\min}},2^{\nu_{\max}}) = (2^2,2^4)$. Για τις δύο πρώτες ο αριθμός των
επαναλήψεων της συνιστώσας εκτίμησης θέσης ορίστηκε σε $I_T=2\nu$, ενώ για την
τελευταία σε $I_T = 2$.  Το κριτήριο σύγκλισης για όλες τις μεθόδους
εφαρμόσθηκε μόνο ως προς την διαφορά εκτίμησης του προσανατολισμού:
$\varepsilon_{\delta p} = 10^{-5}$.  Η συνθήκη τερματισμού ορίστηκε σε
CAER$(\hat{\bm{p}}^\prime) \leq (\hat{\sigma}_R + \hat{\sigma}_V)^{1/2}$, όπου
$\hat{\sigma}_R$ και $\hat{\sigma}_V$ είναι εκτιμήσεις της τυπικής απόκλισης
του θορύβου που επιδρά στις ακτίνες των πραγματικών μετρήσεων $\mathcal{S}_R$
και εικονικών σαρώσεων $\mathcal{S}_V$ αντίστοιχα.

Για σκοπούς σύγκρισης με τις μεθόδους ευθυγράμμισης σαρώσεων που μπορούν να
χρησιμοποιηθούν στην ευθυγράμμιση πραγματικών με εικονικές σαρώσεις η
πειραματική διαδικασία διενεργείται έναντι των μεθόδων ευθυγράμμισης
Μετασχηματισμού Κανονικών Κατανομών (Normal Distributions Transform---NDT)
\cite{Bibera,ndt_code}, FastGICP \cite{Segal2009a,fgicp_code} και PLICP
\cite{Censi2008a,plicp_code}. Οι NDT, FastGICP και CSM ανήκουν στις
\textit{καθιερωμένες} μεθόδους ευθυγράμμισης σαρώσεων
\cite{Koide2021a,Xu2018b,Sobreira2019b,Pishehvari2019b,Qingshan2019c,Pham2021b}.
Επιπλέον, για λόγους σύγκρισης έναντι σύγχρονων αλγορίθμων, οι πειραματική
διαδικασία επεκτείνεται στους αλγορίθμους FastVGICP
\cite{Koide2021a,fgicp_code}, NDT-PSO \cite{Bouraine2021,ndt_pso_code}, και
TEASER \cite{Yang2021,teaser_code}.

Για κάθε πείραμα οι μέθοδοι PLICP, NDT, FastGICP, FastVGICP, \texttt{x1},
\texttt{uf}, και \texttt{fm} εκτελέσθηκαν για $E = 10$ φορές για όλα τα
δείγματα των $D_k$, $D$ $=$ $\{$\texttt{aces}, \texttt{fr079}, \texttt{intel},
\texttt{mit\_csail}, \texttt{mit\_killian}$\}$, $k \in \{0,1,\dots,4\}$.
Επομένως, κάθε μέθοδος δοκιμάστηκε συνολικά $N_{tot} = 10 \times 2 \times 5
\times \sum |D_k|\approx 4.5\cdot10^6$ φορές. Οι χρόνοι εκτέλεσης των NDT-PSO
και TEASER μετρήθηκαν στην τάξη των δευτερολέπτων ανά στάση εισόδου---περίπου
μια τάξη μεγέθους μεγαλύτερη από το χρόνο εκτέλεσης του FSMSM: η πειραματική
διαδικασία επί των NDT-PSO και TEASER εκτελέστηκε μία φορά για κάθε δείγμα του
$D$.

Τα πειράματα επί των FSMSM, FastGICP, FastVGICP, PLICP, και NDT
πραγματοποιήθηκαν σε ένα μόνο νήμα, σε υπολογιστή με συχνότητα CPU $4.0$ GHz.
Οι NDT-PSO και TEASER είναι παράλληλες υλοποιήσεις: τα πειράματά τους
διεξήχθησαν σε τέσσερα νήματα, σε υπολογιστή με συχνότητα CPU $2.2$ GHz.

Το κριτήριο στο οποίο στηρίζεται η αξιολόγηση όλων των δοκιμών είναι η το μέτρο
του συνολικού σφάλματος στάσης---εξ. (??), όπου $\hat{\bm{p}}$ είναι η αρχική
εκτίμηση στάσης, και $\hat{\bm{p}}^\prime$ είναι η έξοδος κάθε υπό δοκιμή
αλγορίθμου. Για κάθε τελική εκτίμηση στάσης $\hat{\bm{p}}_k^{d\prime}$ που
εξάγεται από κάθε αλγόριθμο, $d = 1,2,\dots,|D_k|$, $k \in \{0,1,\dots,4\}$,
καταγράφεται η απόκλισή της από την πραγματική στάση $\bm{p}_k^d$ με τη μορφή
του ολικού μέτρου σφάλματος στάσης. Η μονάδα μέτρησης του είναι
$(\text{m}^2+\text{rad}^2)^{1/2}$ και, όπου παραλείπεται στα σχήματα, αυτό έχει
γίνει για λόγους οικονομίας χώρου και αναγνωσιμότητας.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Αποτελέσματα}
\label{subsection:02_04_05:02}

\vspace{1cm}
\begin{figure}[!h]\hspace{0.5cm}
  \input{./figures/parts/02/chapters/04/sections/05/pose_improvement_percent.tex}
  \vspace{1.25cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\hspace{0.5cm}
  \input{./figures/parts/02/chapters/04/sections/05/caer_style_pose_errors_binned_sm0.tex}
  \vspace{1.25cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\hspace{0.5cm}
  \input{./figures/parts/02/chapters/04/sections/05/caer_style_pose_errors_binned_sm5.tex}
  \vspace{1.25cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\hspace{0.5cm}
  \input{./figures/parts/02/chapters/04/sections/05/caer_style_pose_errors_sm0.tex}
  \vspace{1.25cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\hspace{0.5cm}
  \input{./figures/parts/02/chapters/04/sections/05/caer_style_pose_errors_sm5.tex}
  \vspace{1.25cm}
  \caption{}
  \label{}
\end{figure}




\begin{figure}[!h]\centering
  \begin{subfigure}{\linewidth}
    \vspace{1cm}
    \input{./figures/parts/02/chapters/04/sections/05/boxplots_pose_errors_sm0.tex}
    \vspace{1cm}
  \end{subfigure}\\%
  \begin{subfigure}{\linewidth}
    \vspace{1cm}
    \input{./figures/parts/02/chapters/04/sections/05/boxplots_pose_errors_sm5.tex}
    \vspace{1cm}
  \end{subfigure}%
\caption{}
\label{}
\end{figure}

\begin{figure}[!h]\centering
  \vspace{2cm}
  \input{./figures/parts/02/chapters/04/sections/05/position_improvement_percent_binned_curves.tex}
  \vspace{1cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\centering
  \vspace{2cm}
  \input{./figures/parts/02/chapters/04/sections/05/orientation_improvement_percent_binned_curves.tex}
  \vspace{1cm}
  \caption{}
  \label{}
\end{figure}


\begin{figure}[!h]\centering
  \vspace{2cm}
  \input{./figures/parts/02/chapters/04/sections/05/cross_position_improvement_percent_orientation_binned_curves.tex}
  \vspace{1cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\centering
  \input{./figures/parts/02/chapters/04/sections/05/orientation_wrt_gamma.tex}
  \caption{}
  \label{}
\end{figure}





\begin{figure}[!h]\centering
  \vspace{2cm}
  \input{./figures/parts/02/chapters/04/sections/05/boxplots_execution_times.tex}
  \vspace{1cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\centering
  \vspace{2cm}
  \input{./figures/parts/02/chapters/04/sections/05/boxplots_iterations.tex}
  \vspace{1cm}
  \caption{}
  \label{}
\end{figure}

\begin{figure}[!h]\centering
  \begin{subfigure}{\linewidth}
    \vspace{3cm}
    \input{./figures/parts/02/chapters/04/sections/05/recoveries_sm0.tex}
    \vspace{1cm}
  \end{subfigure}\\%
  \begin{subfigure}{\linewidth}
    \vspace{0cm}
    \input{./figures/parts/02/chapters/04/sections/05/recoveries_sm5.tex}
    \vspace{1cm}
  \end{subfigure}%
\caption{}
\label{}
\end{figure}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Εξέταση και αξιολόγηση αποτελεσμάτων}
\label{subsection:02_04_05:03}
