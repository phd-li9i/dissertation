%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Πειραματική διαδικασία}
\label{subsection:02_02_04:01}

Το περιεχόμενο της παρούσας ενότητας εξυπηρετεί τον έλεγχο τριών διακριτών
υποθέσεων, όπως αρθρώθηκαν στις ενότητες \ref{subsection:02_02_03:01},
\ref{subsection:02_02_03:02}, και \ref{subsection:02_02_03:03}:

\begin{enumerate}
  \item[(H1)] Η επιλογή σωματιδίων υψηλού βάρους από τον πληθυσμό του
        MCL---ισοδύναμα: η απόρριψη σωματιδίων χαμηλού βάρους από αυτόν---και o
        υπολογισμός της εκτίμησης του φίλτρου ως ο σταθμισμένος μέσος όρος
        των στάσεων τους έχει ως αποτέλεσμα αυξημένη ακρίβεια στάσης σε σύγκριση
        με την επιλογή όλων των σωματιδίων από τον πληθυσμό
  \item[(H2)] Η ευθυγράμμιση μεταξύ α) μιας μέτρησης που λαμβάνεται μέσω του
        φυσικού αισθητήρα lidar του ρομπότ από την πραγματική του στάση και
        (β) μιας εικονικής σάρωσης που λαμβάνεται εντός του χάρτη στον οποίο
        πλοηγείται το ρομπότ από την εκτιμώμενη στάση του, και η εφαρμογή του
        προκύπτοντος μετασχηματισμού στην εκτίμηση της στάσης του MCL έχει ως
        αποτέλεσμα αυξημένη ακρίβεια στάσης σε σύγκριση με τον MCL απουσία
        ανατροφοδότησης
  \item[(H3)] Η ανατροφοδότηση της (υποθετικά βελτιωμένης) στάσης στον πληθυσμό
        του MCL με τη μορφή μιας ομάδας σωματιδίων που αποτελούν το $p\%$ του
        τελικού πληθυσμού σωματιδίων, όπου $p$ είναι αρκετά μικρότερο από $100$
        και αρκετά μεγαλύτερο από $1$, (α) έχει ως αποτέλεσμα αυξημένη ακρίβεια
        στάσης σε σύγκριση με τον MCL, (β) έχει ως αποτέλεσμα αυξημένη ακρίβεια
        στάσης σε σύγκριση με την ανατροφοδότηση μόνο ενός σωματιδίου με την εν
        λόγω διορθωμένη στάση, και (γ) είναι πιο εύρωστη από την εκ νέου
        αρχικοποίηση του MCL γύρω από τη μετασχηματισμένη στάση
\end{enumerate}

Στην τρίτη υπόθεση αναφερόμαστε στην ευρωστία με την έννοια της ικανότητας ενός
συστήματος να αποφεύγει την αποτυχία και όχι να ανακάμπτει από την αποτυχία, η
οποία ικανότητα αναφέρεται ως ``ανθεκτικότητα" (resilience)
\cite{Zhu2011b,Tavana2011}. Η ικανότητα ανάκαμψης από αποτυχίες είναι μια
ιδιότητα του ίδιου του φίλτρου σωματιδίων, ενώ η ικανότητα αποφυγής αποτυχίας
(στην προκειμένη περίπτωση η επανεκκίνηση γύρω από μία καταστροφικά λανθασμένη
στάση) είναι ιδιότητα της μεθόδου ανατροφοδότησης.

Οι υποθέσεις αυτές δοκιμάζονται σε δύο διακριτά προσομοιωμένα περιβάλλοντα. To
πρώτο περιβάλλον ονομάζεται CORRIDOR, συμβολίζεται με $\bm{M}_C$, και
παρουσιάζεται στο σχήμα \ref{fig:02_02_04:maps}(α'). Το δεύτερο ονομάζεται
WAREHOUSE, συμβολίζεται με $\bm{M}_W$, και παρουσιάζεται στο σχήμα
\ref{fig:02_02_04:maps}(β'). Η ανάλυση και των δύο χαρτών είναι $0.01$ m
$\times0.01$ m ανά κελί πλέγματος. Ο πρώτος χρησιμοποιείται για να δείξει την
αποτελεσματικότητα του προτεινόμενου συστήματος σε μη σύνθετα περιβάλλοντα,
όπου όλα τα όριά του βρίσκονται εντός της μέγιστης εμβέλειας του αισθητήρα
lidar του ρομπότ ανά πάσα στιγμή.  Αντίθετα, το δεύτερο είναι μια μεγάλη
αποθήκη, που προορίζεται να θέσει μεγαλύτερη πρόκληση στο σύστημα και συνεπώς
στην απόδοσή του: τα εμπόδια βρίσκονται σε μεγαλύτερη απόσταση μεταξύ τους από
ότι στο CORRIDOR, πράγμα που σημαίνει ότι είτε δεν φέρουν όλες οι ακτίνες του
αισθητήρα αξιοποιήσιμη πληροφορία, είτε αλλοιώνονται περισσότερο από θόρυβο,
καθώς το σφάλμα απόστασης αυξάνεται με την μετρήσιμη απόσταση, ή και τα δύο. Η
πρώτη πρόκληση επηρεάζει (α) τον MCL, καθώς πρέπει να βασίζεται περισσότερο
στην οδομετρία του, η οποία είναι επιρρεπής στη συσσώρευση σφαλμάτων, και
λιγότερο στις μετρήσεις απόστασης και (β) την ευθυγράμμιση σαρώσεων, καθώς
υπάρχουν λιγότερα μετρούμενα σημεία σάρωσης και άρα μεγαλύτερη ανεπάρκεια
πληροφοριών κατά την ευθυγράμμιση μετρήσεων με σαρώσεις. Η δεύτερη πρόκληση
επηρεάζει (α) τον MCL δεδομένου ότι η εκτίμηση της στάσης διαταράσσεται από το
θόρυβο, και (β) την ευθυγράμμιση μετρήσεων με σαρώσεις, καθώς ο θόρυβος αυξάνει
την πιθανότητα λανθασμένων αντιστοιχίσεων και, γενικά, της λανθασμένης
ευθυγράμμισης συνολικά. Για το σκοπό αυτό ρυθμίσαμε τον αισθητήρα αποστάσεων
ώστε να λειτουργεί με μέγιστη εμβέλεια $10.0$ μέτρα.

Σε όλες τις προσομοιώσεις χρησιμοποιήθηκε ο MCL παράλληλα με τη δειγματοληψία
KLD, με ελάχιστο και μέγιστο αριθμό σωματιδίων $N_{\min}=200$ και
$N_{\max}=500$.

Οι τρεις ως άνω υποθέσεις δοκιμάζονται κατά τη διαδικασία αυτόνομης πλοήγησης
στα δύο ως άνω περιβάλλοντα. Οι αρχικές και τελικές στάσεις για κάθε χάρτη ήταν
(α) $\bm{M}_C$:
$\bm{p}_0^{\bm{M}_C} \equiv (11.56\text{ m}, 12.20\text{ m}, 0.0 \text{ rad})$,
και $\bm{p}_G^{\bm{M}_C} \equiv (5.0 \text{ m}, 6.0 \text{ m}, 0.0 \text{ rad})$,
αντίστοιχα, και
(β) $\bm{M}_W$:
$\bm{p}_0^{\bm{M}_W} \equiv (17.98 \text{ m}, 2.08 \text{ m}, \pi/2 \text{ rad})$,
και $\bm{p}_G^{\bm{M}_W} \equiv (6.0 \text{ m}, 40.0 \text{ m}, \pi/2 \text{ rad})$
αντίστοιχα. Οι αρχικές και οι τελικές στάσεις για κάθε χάρτη σχεδιάζονται με
πράσινο και κόκκινο χρώμα στα αντίστοιχα σχήματα.

Το ρομπότ που χρησιμοποιήθηκε κατά την πειραματική διαδικασία είναι ένα
Turtlebot v.2, εξοπλισμένο με αισθητήρα απόστασης μέγιστης εμβέλειας
$r_{max} = 10.0$ m, γωνιακού εύρους $\alpha = 260^{\circ}$, και αριθμό ακτίνων
$n_r = 640$, του οποίου οι μετρήσεις αλλοιώνονται από θόρυβο κανονικά
κατανεμημένο, με μηδενική μέση τιμή και τυπική απόκλιση $\sigma = 0.01$ m.

\begin{figure}[h]\hspace{0.5cm}
  \begin{subfigure}{0.49\linewidth}\centering
    \vspace{1.0cm}
    \input{./figures/parts/02/chapters/02/sections/04/corridor.tex}
    \vspace{1.0cm}
    \caption{\small Χάρτης του CORRIDOR, $\bm{M}_C$}
    \label{fig:02_02_04:map_corridor}
  \end{subfigure}\hfill
  \begin{subfigure}{0.49\linewidth} \centering
    \input{./figures/parts/02/chapters/02/sections/04/warehouse.tex}
    \vspace{0.25cm}
    \caption{\small Χάρτης του WAREHOUSE, $\bm{M}_W$}
    \label{fig:02_02_04:map_warehouse}
  \end{subfigure}
  \caption{\small Οι χάρτες των περιβαλλόντων CORRIDOR, $\bm{M}_C$ και
           WAREHOUSE $\bm{M}_W$. Η αρχική στάση του ρομπότ φαίνεται με πράσινο
           χρώμα, ενώ η στάση στόχος του με κόκκινο χρώμα}
\label{fig:02_02_04:maps}
\end{figure}

Για να ελέγξουμε την πρώτη υπόθεση πραγματοποιούμε προσομοιώσεις με τον MCL σε
λειτουργία ανοικτού βρόχου. Συμβολίζοντας με $|\bm{P}_t|$ το μέγεθος του
πληθυσμού σε χρόνο $t>0$, πραγματοποιούμε $N=100$ προσομοιώσεις πλοήγησης για
κάθε μέθοδο επιλογής σωματιδίων, αποτελούμενες από τις επιλογές (α) $100\%
\times |\bm{P}_t|$ των σωματιδίων (η ονομαστική λειτουργία του MCL), (β)
σωματιδίων $\{i\}$ από το $\bm{P}_t$ των οποίων το βάρος $w_t^i$ είναι
μεγαλύτερο από το μέσο βάρος του πληθυσμού $\overline{W_t}$ τη χρονική στιγμή
$t>0$, (γ) $10\% \times |\bm{P}_t|$, και (δ) μόνο το σωματίδιο με το μεγαλύτερο
βάρος από όλα τα σωματίδια του $\bm{P}_t$.

Για να ελέγξουμε την τρίτη υπόθεση πραγματοποιούμε προσομοιώσεις επιλέγοντας
όλα τα σωματίδια $|\bm{P}_t|$ για τον υπολογισμό της τελικής θέσης του MCL,
δοκιμάζοντας την απόδοση του σύνθετου συστήματος (εικόνες \ref{fig:feedback} και
\ref{fig:overall_system}) όταν ο τρόπος ανάδρασης που
χρησιμοποιείται είναι (α) κανένας (ανοικτός βρόχος), (β) soft-$1$ loop-closure,
(γ) soft-$50$ loop-closure, και (δ) hard loop-closure, όπως αυτοί ορίστηκαν
στην ενότητα \ref{subsection:02_02_03:03}.

Για να ελέγξουμε τη δεύτερη υπόθεση παρατηρούμε τα αποτελέσματα όλων των
$2\times4\times100$ προσομοιώσεων που εκτελούνται σε ανοικτό βρόχο ανά μέθοδο
επιλογής σωματιδίων.

Το κριτήριο στο οποίο στηρίζεται η αξιολόγηση όλων των ελέγχων είναι το πλάτος
του συνολικού σφάλματος στάσης (εξίσωση \ref{eq:pose_error_def}) όπου
$(\hat{x}, \hat{y}, \hat{\theta})$ είναι η εκτιμώμενη στάση του ρομπότ (η οποία
εκτιμάται από τον MCL ή το σύστημα μετά την ευθυγράμμιση σαρώσεων, ανάλογα με
τα συμφραζόμενα), και $(x,y,\theta)$ είναι η πραγματική του στάση, και
επιλέχθηκε ως τέτοιο λόγω της έκφρασης του συνολικού σφάλματος της κατάστασης
του συστήματος και της ικανότητάς του να παρέχει έναν κεντρικό τόπο που
διευκολύνει την άμεση σύγκριση των επιδόσεων της κάθε παραλλαγής του συστήματος
όσον αφορά την ακρίβεια της στάσης. Για κάθε στάση που εξάγεται από τον MCL σε
μία διαδρομή πλοήγησης (συμβολίζεται με $\hat{\bm{x}}_t$ στο σχήμα
\ref{fig:overall_system}) και το σύστημα μετά την ευθυγράμμιση σαρώσεων
($\hat{\bm{x}}^{\prime}_t$) σε μία προσομοίωση, καταγράφουμε το σφάλμα τους από
την πραγματική στάση του ρομπότ με τη μορφή του συνολικού σφάλματος (εξ.
\ref{eq:pose_error_def}). Στη συνέχεια καταγράφουμε το μέσο όρο των
σφαλμάτων τους για μία προσομοίωση, και αναφέρουμε την κατανομή αυτών των τιμών
για όλες τις $N = 100$ προσομοιώσεις της ίδιας διαμόρφωσης. Η μονάδα μέτρησης
του συνολικού σφάλματος στάσης είναι $(\text{m}^2+\text{rad}^2)^{1/2}$, και
παραλείπεται στα σχήματα της παρακάτω υποενότητες για λόγους οικονομίας χώρου.

Σε αντίθεση με τις στάσεις από όπου αξιολογήθηκαν οι επιδόσεις των συστημάτων
των \cite{Rowekamper2012a} και \cite{Vasiljevic2016a}(τα σφάλματα των
συστημάτων τους αξιολογήθηκαν μόνο κοντά σε προκαθορισμένες θέσεις
ενδιαφέροντος του περιβάλλοντος), εμείς αξιολογούμε την επίδοση των ανωτέρω
διαμορφόσεων \textit{κατά μήκος ολόκληρης της διαδρομής} από $\bm{p}_0$ έως
$\bm{p}_G$: αυτό προσφέρει πιο πλήρη εικόνα για την επίδοση των εν λόγω
διαμορφώσεων.

Οι προσομοιώσεις πραγματοποιήθηκαν στο περιβάλλον προσομοίωσης
Gazebo\footnote{\url{http://gazebosim.org/}} μέσω
ROS\footnote{\url{https://www.ros.org/}} σε Ubuntu 16.04, με έναν επεξεργαστή
$12$ νημάτων και συχνότητας $4.00$ GHz, χρησιμοποιώντας έως και $32$ Gb μνήμης
RAM. Για το την υλοποίηση της MCL με δειγματοληψία KLD χρησιμοποιήσαμε το ROS
πακέτο \texttt{amcl},\footnote{\url{http://wiki.ros.org/amcl}} το οποίο
τροποποιήσαμε προκειμένου για την επιλογή και εισαγωγή σωματιδίων από και στον
πληθυσμό του φίλτρου. Το σύστημα καταλαμβάνει δύο CPU διεργασίες, περίπου 300MB
μνήμης, ενώ η διαδικασία ευθυγράμμισης σαρώσεων χρησιμοποιεί περίπου $5.2\%$
ενός πυρήνα της CPU.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Αξιολόγηση της μεθόδου επιλογής σωματιδίων}

Στα σχήματα \ref{fig:02_02_04:selections}(α') και
\ref{fig:02_02_04:selections}(β') απεικονίζονται οι κατανομές των μέσων
σφαλμάτων στάσης του MCL ανοικτού βρόχου και του σύνθετου συστήματος ανά
διαδρομή του ρομπότ στα περιβάλλοντα CORRIDOR και WAREHOUSE, ανά μέθοδο
επιλογής σωματιδίων. Τα υποκείμενα σφάλματα θέσης και προσανατολισμού
απεικονίζονται στα σχήματα του παραρτήματος
\ref{appendix:02:selection_methods}.


\begin{figure}[h]
  \begin{subfigure}{\linewidth}
  \hspace{-1.25cm}
    \input{./figures/parts/02/chapters/02/sections/04/corridor_mean_total_errors_per_selection.tex}
    \vspace{0.3cm}
    \caption{Περιβάλλον CORRIDOR}
    \label{fig:02_02_04:corridor_selections}
  \end{subfigure}\\
  \begin{subfigure}{\linewidth}\vspace{0.5cm}
    \hspace{-1.25cm}
    \input{./figures/parts/02/chapters/02/sections/04/warehouse_mean_total_errors_per_selection.tex}
    \vspace{0.3cm}
    \caption{Περιβάλλον WAREHOUSE}
    \label{fig:02_02_04:warehouse_selections}
  \end{subfigure}
\caption{\small Η κατανομή του μέσου σφάλματος στάσης του MCL σε ανοιχτό βρόχο
         (στα αριστερά κάθε υποδεικνυόμενης μεθόδου επιλογής, με μαύρο χρώμα)
         και του σύνθετου συστήματος (δεξιά, με κόκκινο) ανά προσομοίωση, σε
         $N=100$ προσομοιώσεις, ανάλογα με την μέθοδο επιλογής πληθυσμού. Το
         σύμβολο ``$100\%$" υποδηλώνει τη διαμόρφωση του συστήματος όπου όλα τα
         σωματίδια του συνόλου του πληθυσμού επιλέγονται κατά τη διαδικασία
         εξαγωγής της εκτίμησης της στάσης του συστήματος, το σύμβολο
         ``$>\overline{W}$" υποδηλώνει εκείνη της επιλογής των σωματιδίων των
         οποίων το βάρος είναι μεγαλύτερο από το μέσο βάρος του πληθυσμού του
         φίλτρου, το ``$10\%$" εκείνη που μόνο το άνω $10\%$ των βαρύτερων
         σωματιδίων επιλέγονται, και ``top" τη διαμόρφωση όπου επιλέγεται μόνο
         το σωματίδιο με το μεγαλύτερο βάρος μεταξύ όλων των σωματιδίων του
         πληθυσμού}
\label{fig:02_02_04:selections}
\end{figure}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Αξιολόγηση της μεθόδου ευθυγράμμισης μετρήσεων με σαρώσεις χάρτη και ανάδραση}

\begin{figure}[h]
  \begin{subfigure}{\linewidth}
  \hspace{-1.25cm}
    \input{./figures/parts/02/chapters/02/sections/04/corridor_mean_total_errors_per_feedback.tex}
    \vspace{0.3cm}
    \caption{Περιβάλλον CORRIDOR}
    \label{}
  \end{subfigure}\\
  \begin{subfigure}{\linewidth}\vspace{0.5cm}
    \hspace{-1.25cm}
    \input{./figures/parts/02/chapters/02/sections/04/warehouse_mean_total_errors_per_feedback.tex}
    \vspace{0.3cm}
    \caption{Περιβάλλον WAREHOUSE}
    \label{}
    \end{subfigure}
\caption{}
\label{}
\end{figure}
